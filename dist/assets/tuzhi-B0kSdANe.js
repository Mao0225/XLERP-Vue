import{O as pe,P as ye,Q as Ve,R as we,_ as me,f as ge,k as W,g as E,r as g,v as Ce,s as ce,a7 as _e,h as c,G as he,o as N,c as P,a as D,b as e,w as t,x as ue,a6 as ze,i as h,q as fe,p as ke,z as xe,H as re,l as se,E as z,A as be,e as Se,F as Ue,m as Ne,B as de}from"./index-DvIhe9Wx.js";import{g as Te,a as qe,d as De,c as Fe,u as $e}from"./tuzhi-Cg6E2Zxm.js";import{a as Ie}from"./file-dcKrrYHU.js";function Me(v){return pe("/tuzhicailiao/getpage",v)}function Be(v){return ye("/tuzhicailiao/save",v)}function Le(v){return Ve("/tuzhicailiao/update",v)}function Oe(v){return we("/tuzhicailiao/delete",v)}function Re(v){return pe("/basitem/getyuancailiaopage",v)}const je={class:"tuzhicailiao-management"},Ee={class:"action-bar"},Pe={key:0},Je={class:"pagination-container"},Ye={class:"search-bar"},Ae={class:"pagination-container"},Ke={__name:"tuzhicailiao",props:{id:{type:Number,required:!0},tuzhibianhao:{type:String,required:!0}},setup(v){const k=v,V=ge(),U=W(()=>({username:V.username||"未登录"})),y=E({pageNumber:1,pageSize:10,tuzhiid:0}),L=g([]),F=g(0),x=g(!1),_=g(!1),$=g("add"),T=W(()=>$.value==="add"?"添加图纸材料":"编辑图纸材料"),S=g(null),o=E({id:void 0,tuzhibianhao:"",no:"",spec:"",shuliang:"",weight:"",cailiaotype:"",unit:"",name:"",inclass:"",memo:"",basitemid:"",writer:"",tuzhiid:k.id}),u={no:[{required:!0,message:"请输入物料编号",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],shuliang:[{required:!0,message:"请输入数量",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],basitemid:[{required:!0,message:"请输入物料ID",trigger:"blur"}]},w=async()=>{y.tuzhiid=k.id,x.value=!0;try{const l=await Me(y);L.value=l.data.page.list,F.value=l.data.page.totalRow}catch(l){console.error("获取图纸材料列表失败",l),z.error("获取图纸材料列表失败")}finally{x.value=!1}},J=l=>{y.pageSize=l,w()},Y=l=>{y.pageNumber=l,w()},X=()=>{y.pageNumber=1,w()};Ce(()=>[k.id,k.tuzhibianhao],()=>{y.pageNumber=1,y.tuzhiid=k.id,w()},{immediate:!0});const C=()=>{$.value="add",I(),o.tuzhibianhao=k.tuzhibianhao,o.tuzhiid=k.id,o.writer=U.value.username,_.value=!0},Z=l=>{$.value="edit",Object.assign(o,l),o.writer=U.value.username,_.value=!0},ee=()=>{_.value=!1,I()},O=l=>{be.confirm("确认删除该图纸材料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await Oe({id:l.id}),z.success("删除成功"),w()}catch(a){console.error("删除图纸材料失败",a),z.error("删除图纸材料失败")}}).catch(()=>{})},I=()=>{S.value&&S.value.resetFields(),Object.assign(o,{id:void 0,tuzhibianhao:"",no:"",spec:"",shuliang:"",weight:"",cailiaotype:"",unit:"",name:"",inclass:"",memo:"",basitemid:"",writer:"",tuzhiid:k.id})},le=()=>{S.value&&S.value.validate(async l=>{if(l)try{$.value==="add"?(await Be(o),z.success("添加成功")):(await Le(o),z.success("编辑成功")),_.value=!1,I(),w()}catch(a){console.error("保存图纸材料失败",a),z.error("保存图纸材料失败")}})},q=g(!1),f=E({pageNumber:1,pageSize:10,itemNo:"",itemName:""}),A=g([]),K=g(0),R=g(!1),ae=()=>{q.value=!0,M()},M=async()=>{R.value=!0;try{const l=await Re(f);A.value=l.data.page.list,K.value=l.data.page.totalRow}catch(l){console.error("获取原材料列表失败",l),z.error("获取原材料列表失败")}finally{R.value=!1}},te=l=>{f.pageSize=l,M()},oe=l=>{f.pageNumber=l,M()},ie=l=>{o.no=l.no,o.name=l.name,o.spec=l.spec,o.inclass=l.inclass,o.weight=l.weight,o.unit=l.unit,o.basitemid=l.id,q.value=!1},s=()=>{f.pageNumber=1,f.itemNo="",f.itemName=""};return ce(()=>{w()}),_e(()=>{w()}),(l,a)=>{const d=c("el-icon"),m=c("el-button"),n=c("el-table-column"),Q=c("el-table"),G=c("el-pagination"),p=c("el-input"),b=c("el-form-item"),ne=c("el-form"),H=c("el-dialog"),j=he("loading");return N(),P("div",je,[D("div",Ee,[e(m,{type:"warning",onClick:X},{default:t(()=>[e(d,null,{default:t(()=>[e(ue(ze))]),_:1}),a[22]||(a[22]=h(" 刷新 "))]),_:1}),v.tuzhibianhao?(N(),P("span",Pe,"图纸编号："+fe(v.tuzhibianhao),1)):ke("",!0),e(m,{type:"primary",onClick:C,class:"ml-auto"},{default:t(()=>[e(d,null,{default:t(()=>[e(ue(xe))]),_:1}),a[23]||(a[23]=h(" 添加材料 "))]),_:1})]),re((N(),se(Q,{data:L.value,border:"",style:{width:"100%"}},{default:t(()=>[e(n,{type:"index",label:"序号",width:"80"}),e(n,{prop:"tuzhibianhao",label:"图纸编号"}),e(n,{prop:"no",label:"物料编号"}),e(n,{prop:"spec",label:"规格"}),e(n,{prop:"shuliang",label:"数量"}),e(n,{prop:"weight",label:"重量"}),e(n,{prop:"cailiaotype",label:"材料类型"}),e(n,{prop:"unit",label:"单位"}),e(n,{prop:"name",label:"名称"}),e(n,{prop:"inclass",label:"类别"}),e(n,{prop:"memo",label:"备注"}),e(n,{prop:"id",label:"图纸ID"}),e(n,{prop:"basitemid",label:"物料ID"}),e(n,{prop:"writer",label:"录入者"}),e(n,{label:"操作",width:"200"},{default:t(({row:i})=>[e(m,{type:"primary",size:"small",onClick:r=>Z(i)},{default:t(()=>a[24]||(a[24]=[h("编辑")])),_:2},1032,["onClick"]),e(m,{type:"danger",size:"small",onClick:r=>O(i)},{default:t(()=>a[25]||(a[25]=[h("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,x.value]]),D("div",Je,[e(G,{"current-page":y.pageNumber,"onUpdate:currentPage":a[0]||(a[0]=i=>y.pageNumber=i),"page-size":y.pageSize,"onUpdate:pageSize":a[1]||(a[1]=i=>y.pageSize=i),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:F.value,onSizeChange:J,onCurrentChange:Y},null,8,["current-page","page-size","total"])]),e(H,{title:T.value,modelValue:_.value,"onUpdate:modelValue":a[15]||(a[15]=i=>_.value=i),width:"600px",onClosed:I},{footer:t(()=>[e(m,{onClick:ee},{default:t(()=>a[27]||(a[27]=[h("取消")])),_:1}),e(m,{type:"primary",onClick:le},{default:t(()=>a[28]||(a[28]=[h("确定")])),_:1})]),default:t(()=>[e(ne,{ref_key:"formRef",ref:S,model:o,rules:u,"label-width":"120px"},{default:t(()=>[e(b,{label:"图纸编号",prop:"tuzhibianhao"},{default:t(()=>[e(p,{modelValue:o.tuzhibianhao,"onUpdate:modelValue":a[2]||(a[2]=i=>o.tuzhibianhao=i),placeholder:"请输入图纸编号",disabled:""},null,8,["modelValue"])]),_:1}),e(b,{label:"物料编号",prop:"no"},{default:t(()=>[e(p,{modelValue:o.no,"onUpdate:modelValue":a[3]||(a[3]=i=>o.no=i),placeholder:"请输入物料编号",style:{width:"70%",display:"inline-block"}},null,8,["modelValue"]),e(m,{type:"primary",size:"small",onClick:ae,style:{"margin-left":"10px"}},{default:t(()=>a[26]||(a[26]=[h("选择材料")])),_:1})]),_:1}),e(b,{label:"规格",prop:"spec"},{default:t(()=>[e(p,{modelValue:o.spec,"onUpdate:modelValue":a[4]||(a[4]=i=>o.spec=i),placeholder:"请输入规格"},null,8,["modelValue"])]),_:1}),e(b,{label:"数量",prop:"shuliang"},{default:t(()=>[e(p,{modelValue:o.shuliang,"onUpdate:modelValue":a[5]||(a[5]=i=>o.shuliang=i),placeholder:"请输入数量"},null,8,["modelValue"])]),_:1}),e(b,{label:"重量",prop:"weight"},{default:t(()=>[e(p,{modelValue:o.weight,"onUpdate:modelValue":a[6]||(a[6]=i=>o.weight=i),placeholder:"请输入重量"},null,8,["modelValue"])]),_:1}),e(b,{label:"材料类型",prop:"cailiaotype"},{default:t(()=>[e(p,{modelValue:o.cailiaotype,"onUpdate:modelValue":a[7]||(a[7]=i=>o.cailiaotype=i),placeholder:"请输入材料类型"},null,8,["modelValue"])]),_:1}),e(b,{label:"单位",prop:"unit"},{default:t(()=>[e(p,{modelValue:o.unit,"onUpdate:modelValue":a[8]||(a[8]=i=>o.unit=i),placeholder:"请输入单位"},null,8,["modelValue"])]),_:1}),e(b,{label:"名称",prop:"name"},{default:t(()=>[e(p,{modelValue:o.name,"onUpdate:modelValue":a[9]||(a[9]=i=>o.name=i),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(b,{label:"类别",prop:"inclass"},{default:t(()=>[e(p,{modelValue:o.inclass,"onUpdate:modelValue":a[10]||(a[10]=i=>o.inclass=i),placeholder:"请输入类别"},null,8,["modelValue"])]),_:1}),e(b,{label:"备注",prop:"memo"},{default:t(()=>[e(p,{modelValue:o.memo,"onUpdate:modelValue":a[11]||(a[11]=i=>o.memo=i),type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),e(b,{label:"图纸ID",prop:"id"},{default:t(()=>[e(p,{modelValue:o.id,"onUpdate:modelValue":a[12]||(a[12]=i=>o.id=i),placeholder:"图纸ID",disabled:""},null,8,["modelValue"])]),_:1}),e(b,{label:"物料ID",prop:"basitemid"},{default:t(()=>[e(p,{modelValue:o.basitemid,"onUpdate:modelValue":a[13]||(a[13]=i=>o.basitemid=i),placeholder:"请输入物料ID"},null,8,["modelValue"])]),_:1}),e(b,{label:"录入者",prop:"writer"},{default:t(()=>[e(p,{modelValue:o.writer,"onUpdate:modelValue":a[14]||(a[14]=i=>o.writer=i),placeholder:"请输入录入者",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(H,{title:"选择材料",modelValue:q.value,"onUpdate:modelValue":a[21]||(a[21]=i=>q.value=i),width:"800px",onClosed:s},{footer:t(()=>[e(m,{onClick:a[20]||(a[20]=i=>q.value=!1)},{default:t(()=>a[31]||(a[31]=[h("取消")])),_:1})]),default:t(()=>[D("div",Ye,[e(p,{modelValue:f.itemNo,"onUpdate:modelValue":a[16]||(a[16]=i=>f.itemNo=i),placeholder:"按物料编号搜索",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),e(p,{modelValue:f.itemName,"onUpdate:modelValue":a[17]||(a[17]=i=>f.itemName=i),placeholder:"按物料名称搜索",style:{width:"200px"}},null,8,["modelValue"]),e(m,{type:"primary",onClick:M},{default:t(()=>a[29]||(a[29]=[h("搜索")])),_:1})]),re((N(),se(Q,{data:A.value,border:"",style:{width:"100%"}},{default:t(()=>[e(n,{prop:"no",label:"物料编号"}),e(n,{prop:"name",label:"物料名称"}),e(n,{prop:"spec",label:"规格"}),e(n,{prop:"inclass",label:"类别"}),e(n,{prop:"weight",label:"重量"}),e(n,{prop:"unit",label:"单位"}),e(n,{label:"操作",width:"100"},{default:t(({row:i})=>[e(m,{type:"primary",size:"small",onClick:r=>ie(i)},{default:t(()=>a[30]||(a[30]=[h("选择")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,R.value]]),D("div",Ae,[e(G,{"current-page":f.pageNumber,"onUpdate:currentPage":a[18]||(a[18]=i=>f.pageNumber=i),"page-size":f.pageSize,"onUpdate:pageSize":a[19]||(a[19]=i=>f.pageSize=i),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:K.value,onSizeChange:te,onCurrentChange:oe},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])])}}},Qe=me(Ke,[["__scopeId","data-v-8f413eeb"]]),Ge={class:"tuzhi-management"},He={class:"action-bar"},We=["onClick"],Xe={class:"pagination-container"},Ze={__name:"tuzhi",setup(v){const k=ge(),V=E({pageNumber:1,pageSize:10,tuzhimingcheng:""}),U=W(()=>({username:k.descr||"未知"})),y=g([]),L=g(0),F=g(!1),x=g(!1),_=g("add"),$=W(()=>_.value==="add"?"新增图纸":"编辑图纸"),T=g(null),S=g(null),o=g([]),u=E({id:void 0,tuzhibianhao:"",tuzhimingcheng:"",tuzhizuozhe:"",chuangzuoriqi:"",tuzhimiaoshu:"",memo:"",flag:0,type:0,writer:"",tuzhiurl:"[]"}),w=g(!1),J=g(null),Y=g(""),X={tuzhibianhao:[{required:!0,message:"请输入图纸编号",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],tuzhimingcheng:[{required:!0,message:"请输入图纸名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],tuzhizuozhe:[{required:!0,message:"请输入图纸作者",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],chuangzuoriqi:[{required:!0,message:"请选择创作日期",trigger:"change"}],tuzhimiaoshu:[{required:!0,message:"请输入图纸描述",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],memo:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}]},C=async()=>{F.value=!0;try{const s=await Te(V);y.value=s.data.page.list,L.value=s.data.page.totalRow}catch(s){console.error("获取图纸列表失败",s),z.error("获取图纸列表失败")}finally{F.value=!1}},Z=s=>{V.pageSize=s,C()},ee=s=>{V.pageNumber=s,C()},O=()=>{T.value&&T.value.resetFields(),S.value&&S.value.clearFiles(),o.value=[],Object.assign(u,{id:void 0,tuzhibianhao:"",tuzhimingcheng:"",tuzhizuozhe:U.value.username,chuangzuoriqi:"",tuzhimiaoshu:"",memo:"",flag:0,type:0,writer:U.value.username,tuzhiurl:"[]"})},I=async(s,l)=>{const a=new FormData;a.append("file",s.raw),a.append("folder","tuzhi");try{const d=await Ie(a);if(d.success&&d.data&&d.data.url)o.value=l.map(m=>({name:m.name,url:m.url||m.raw&&d.data.url})),u.tuzhiurl=JSON.stringify(o.value),z.success(`${s.name} 上传成功`);else throw new Error(d.msg||"图纸上传失败")}catch(d){console.error("图纸上传失败",d),z.error(`${s.name} 上传失败`),o.value=o.value.filter(m=>m.name!==s.name)}},le=(s,l)=>{o.value=l.map(a=>({name:a.name,url:a.url})),u.tuzhiurl=JSON.stringify(o.value),z.success(`${s.name} 已移除`)},q=()=>{_.value="add",x.value=!0,o.value=[],u.writer=U.value.username,u.chuangzuoriqi=new Date().toISOString().split("T")[0]},f=async s=>{_.value="edit";try{const l=await qe({id:s.id});Object.assign(u,l.data.tuzhi);try{JSON.parse(u.tuzhiurl)}catch{if(u.tuzhiurl){const d=u.tuzhiurl.split("-");u.tuzhiurl=JSON.stringify(d.map(m=>({name:m.split("/").pop(),url:de+m})))}else u.tuzhiurl="[]"}o.value=JSON.parse(u.tuzhiurl).map(a=>({name:a.name,url:a.url})),x.value=!0}catch(l){console.error("获取图纸信息失败",l),z.error("获取图纸信息失败")}},A=()=>{x.value=!1,O()},K=s=>{be.confirm(`确认删除图纸"${s.tuzhimingcheng}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await De({id:s.id}),z.success("删除成功"),C()}catch(l){console.error("删除图纸失败",l),z.error("删除图纸失败")}}).catch(()=>{})},R=(s,l)=>{const a=s.startsWith("http")?s:de+s,d=l.split(".").pop().toLowerCase();if(["jpg","jpeg","png","pdf"].includes(d))window.open(a,"_blank");else{const n=document.createElement("a");n.href=a,n.download=l,n.style.display="none",document.body.appendChild(n),n.click(),setTimeout(()=>{document.body.removeChild(n)},100)}},ae=()=>{(!u.tuzhizuozhe||u.tuzhizuozhe.trim()===""||u.tuzhizuozhe.trim().toLowerCase()==="n/a")&&(u.tuzhizuozhe=U.value.username)},M=()=>{T.value&&T.value.validate(async s=>{if(s)try{const l={...u};_.value==="add"?(l.writer||(l.writer=U.value.username),await Fe(l),z.success("新增成功")):(await $e(l),z.success("修改成功")),x.value=!1,O(),C()}catch(l){console.error("保存图纸失败",l),z.error("保存图纸失败")}})},te=s=>{J.value=s.id,Y.value=s.tuzhibianhao,w.value=!0},oe=()=>{C()},ie=()=>{V.tuzhimingcheng="",V.pageNumber=1,C()};return ce(()=>{C()}),(s,l)=>{const a=c("el-input"),d=c("el-button"),m=c("el-icon"),n=c("el-table-column"),Q=c("el-table"),G=c("el-pagination"),p=c("el-form-item"),b=c("el-date-picker"),ne=c("el-upload"),H=c("el-form"),j=c("el-dialog"),i=he("loading");return N(),P("div",Ge,[D("div",He,[e(a,{modelValue:V.tuzhimingcheng,"onUpdate:modelValue":l[0]||(l[0]=r=>V.tuzhimingcheng=r),placeholder:"请输入图纸名称搜索",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:C,onKeyup:Se(C,["enter"])},null,8,["modelValue"]),e(d,{type:"primary",onClick:C},{default:t(()=>l[13]||(l[13]=[h("搜索")])),_:1}),e(d,{type:"warning",onClick:ie},{default:t(()=>[e(m,null,{default:t(()=>[e(ue(ze))]),_:1}),l[14]||(l[14]=h(" 刷新 "))]),_:1}),e(d,{type:"primary",style:{"margin-left":"auto"},onClick:q},{default:t(()=>l[15]||(l[15]=[h("新增图纸")])),_:1})]),re((N(),se(Q,{data:y.value,border:"",style:{width:"100%"}},{default:t(()=>[e(n,{type:"index",label:"序号",width:"80"}),e(n,{prop:"tuzhibianhao",label:"图纸编号"}),e(n,{prop:"tuzhimingcheng",label:"图纸名称"}),e(n,{prop:"tuzhizuozhe",label:"图纸作者"}),e(n,{prop:"chuangzuoriqi",label:"创作日期"}),e(n,{prop:"tuzhimiaoshu",label:"图纸描述"}),e(n,{label:"图纸文件"},{default:t(({row:r})=>[(N(!0),P(Ue,null,Ne(JSON.parse(r.tuzhiurl||"[]"),(B,ve)=>(N(),P("div",{key:ve},[D("span",{class:"file-link",onClick:el=>R(B.url,B.name)},fe(B.name),9,We)]))),128))]),_:1}),e(n,{prop:"memo",label:"备注"}),e(n,{prop:"writer",label:"录入者"}),e(n,{label:"操作",width:"300"},{default:t(({row:r})=>[e(d,{type:"success",size:"small",onClick:B=>te(r)},{default:t(()=>l[16]||(l[16]=[h("材料管理")])),_:2},1032,["onClick"]),e(d,{type:"primary",size:"small",onClick:B=>f(r)},{default:t(()=>l[17]||(l[17]=[h("编辑")])),_:2},1032,["onClick"]),e(d,{type:"danger",size:"small",onClick:B=>K(r)},{default:t(()=>l[18]||(l[18]=[h("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[i,F.value]]),D("div",Xe,[e(G,{"current-page":V.pageNumber,"onUpdate:currentPage":l[1]||(l[1]=r=>V.pageNumber=r),"page-size":V.pageSize,"onUpdate:pageSize":l[2]||(l[2]=r=>V.pageSize=r),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:L.value,onSizeChange:Z,onCurrentChange:ee},null,8,["current-page","page-size","total"])]),e(j,{title:$.value,modelValue:x.value,"onUpdate:modelValue":l[10]||(l[10]=r=>x.value=r),width:"600px",onClosed:O},{footer:t(()=>[e(d,{onClick:A},{default:t(()=>l[20]||(l[20]=[h("取消")])),_:1}),e(d,{type:"primary",onClick:M},{default:t(()=>l[21]||(l[21]=[h("确定")])),_:1})]),default:t(()=>[e(H,{ref_key:"formRef",ref:T,model:u,rules:X,"label-width":"100px"},{default:t(()=>[e(p,{label:"图纸编号",prop:"tuzhibianhao"},{default:t(()=>[e(a,{modelValue:u.tuzhibianhao,"onUpdate:modelValue":l[3]||(l[3]=r=>u.tuzhibianhao=r),placeholder:"请输入图纸编号"},null,8,["modelValue"])]),_:1}),e(p,{label:"图纸名称",prop:"tuzhimingcheng"},{default:t(()=>[e(a,{modelValue:u.tuzhimingcheng,"onUpdate:modelValue":l[4]||(l[4]=r=>u.tuzhimingcheng=r),placeholder:"请输入图纸名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"图纸作者",prop:"tuzhizuozhe"},{default:t(()=>[e(a,{modelValue:u.tuzhizuozhe,"onUpdate:modelValue":l[5]||(l[5]=r=>u.tuzhizuozhe=r),placeholder:"请输入图纸作者",onBlur:ae},null,8,["modelValue"])]),_:1}),e(p,{label:"创作日期",prop:"chuangzuoriqi"},{default:t(()=>[e(b,{modelValue:u.chuangzuoriqi,"onUpdate:modelValue":l[6]||(l[6]=r=>u.chuangzuoriqi=r),type:"date",placeholder:"请选择创作日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(p,{label:"图纸描述",prop:"tuzhimiaoshu"},{default:t(()=>[e(a,{modelValue:u.tuzhimiaoshu,"onUpdate:modelValue":l[7]||(l[7]=r=>u.tuzhimiaoshu=r),placeholder:"请输入图纸描述"},null,8,["modelValue"])]),_:1}),e(p,{label:"备注",prop:"memo"},{default:t(()=>[e(a,{modelValue:u.memo,"onUpdate:modelValue":l[8]||(l[8]=r=>u.memo=r),type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),e(p,{label:"图纸文件",prop:"tuzhiurl"},{default:t(()=>[e(ne,{ref_key:"tuzhiUpload",ref:S,"auto-upload":!1,"on-change":I,"on-remove":le,limit:10,accept:".pdf,.jpg,.jpeg,.png","file-list":o.value,"list-type":"text"},{default:t(()=>[e(d,{type:"primary"},{default:t(()=>l[19]||(l[19]=[h("上传图纸")])),_:1})]),_:1},8,["file-list"])]),_:1}),e(p,{label:"录入者",prop:"writer"},{default:t(()=>[e(a,{modelValue:u.writer,"onUpdate:modelValue":l[9]||(l[9]=r=>u.writer=r),placeholder:"自动填充",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(j,{title:"图纸材料管理",modelValue:w.value,"onUpdate:modelValue":l[12]||(l[12]=r=>w.value=r),width:"80%",onClosed:oe},{footer:t(()=>[e(d,{onClick:l[11]||(l[11]=r=>w.value=!1)},{default:t(()=>l[22]||(l[22]=[h("关闭")])),_:1})]),default:t(()=>[e(Qe,{id:J.value,tuzhibianhao:Y.value},null,8,["id","tuzhibianhao"])]),_:1},8,["modelValue"])])}}},ol=me(Ze,[["__scopeId","data-v-5ab528bd"]]);export{ol as default};

import{_ as G,v as I,g as b,r as m,s as O,h as r,G as T,o as V,l as y,w as n,a as S,b as a,e as v,i as g,H as $,q as A,E as z}from"./index-DvIhe9Wx.js";import{a as J}from"./plshengchangongdan-xXUNx7N2.js";const Q={class:"search-bar"},X={class:"pagination-container"},Y={__name:"WoNoSelector",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(q,{emit:H}){const W=[{id:1,value:"待处理"},{id:2,value:"处理中"},{id:3,value:"已完成"},{id:4,value:"已取消"},{id:5,value:"已过期"}],k=o=>{const e=W.find(p=>p.id===o);return e?e.value:"未知状态"},L=q,w=H;I(()=>L.modelValue,o=>{u.value=o});const t=b({woNo:"",ipoNo:"",purchaserHqCode:""}),s=b({pageNumber:1,pageSize:10,woNo:"",ipoNo:"",purchaserHqCode:""}),f=m([]),h=m(0),N=m(!1),u=m(!1),x=async()=>{N.value=!0;try{s.woNo=t.woNo,s.ipoNo=t.ipoNo,s.purchaserHqCode=t.purchaserHqCode;const o=await J(s);o.data&&o.data.page&&o.data.page.list?(f.value=o.data.page.list,h.value=o.data.page.totalRow):z.error("返回的数据格式不正确")}catch(o){z.error("获取合同号列表失败: "+o.message)}finally{N.value=!1}},d=()=>{s.pageNumber=1,WoNoList()},U=()=>{t.woNo="",t.ipoNo="",t.purchaserHqCode="",s.pageNumber=1,WoNoList()},B=o=>{s.pageSize=o,s.pageNumber=1,WoNoList()},K=o=>{s.pageNumber=o,WoNoList()},D=o=>{C(o)},C=o=>{w("select",o),u.value=!1},P=()=>{t.woNo="",t.ipoNo="",t.purchaserHqCode="",s.pageNumber=1,w("update:modelValue",!1)};return O(()=>{x()}),(o,e)=>{const p=r("el-input"),c=r("el-col"),_=r("el-button"),R=r("el-row"),i=r("el-table-column"),E=r("el-table"),M=r("el-pagination"),j=r("el-dialog"),F=T("loading");return V(),y(j,{title:"选择生产工单号",modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=l=>u.value=l),width:"60%",onClosed:P},{default:n(()=>[S("div",Q,[a(R,{gutter:20},{default:n(()=>[a(c,{span:8},{default:n(()=>[a(p,{modelValue:t.woNo,"onUpdate:modelValue":e[0]||(e[0]=l=>t.woNo=l),placeholder:"请输入生产工单号",onKeyup:v(d,["enter"])},null,8,["modelValue"])]),_:1}),a(c,{span:8},{default:n(()=>[a(p,{modelValue:t.ipoNo,"onUpdate:modelValue":e[1]||(e[1]=l=>t.ipoNo=l),placeholder:"请输入生产订单号",onKeyup:v(d,["enter"])},null,8,["modelValue"])]),_:1}),a(c,{span:8},{default:n(()=>[a(p,{modelValue:t.purchaserHqCode,"onUpdate:modelValue":e[2]||(e[2]=l=>t.purchaserHqCode=l),placeholder:"请输入采购方总部编码",onKeyup:v(d,["enter"])},null,8,["modelValue"])]),_:1}),a(c,{span:8},{default:n(()=>[a(_,{type:"primary",onClick:d},{default:n(()=>e[6]||(e[6]=[g("搜索")])),_:1}),a(_,{onClick:U},{default:n(()=>e[7]||(e[7]=[g("重置")])),_:1})]),_:1})]),_:1})]),$((V(),y(E,{data:f.value,border:"",style:{width:"100%","margin-top":"20px"},onRowClick:D},{default:n(()=>[a(i,{prop:"woNo",label:"生产工单号",width:"120"}),a(i,{prop:"purchaserHqCode",label:"采购方总部编码",width:"150"}),a(i,{prop:"ipoNo",label:"生产订单号",width:"150"}),a(i,{prop:"woStatus",label:"工单状态",width:"120"},{default:n(({row:l})=>[g(A(k(l.woStatus)),1)]),_:1}),a(i,{label:"操作",width:"100"},{default:n(({row:l})=>[a(_,{type:"primary",size:"small",onClick:Z=>C(l)},{default:n(()=>e[8]||(e[8]=[g(" 选择 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,N.value]]),S("div",X,[a(M,{"current-page":s.pageNumber,"onUpdate:currentPage":e[3]||(e[3]=l=>s.pageNumber=l),"page-size":s.pageSize,"onUpdate:pageSize":e[4]||(e[4]=l=>s.pageSize=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:B,onCurrentChange:K},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])}}},ae=G(Y,[["__scopeId","data-v-0a4ff595"]]);export{ae as W};

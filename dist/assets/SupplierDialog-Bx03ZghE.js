import{_ as I,r as b,v as k,g as D,E as G,h as p,G as H,o as x,l as U,w as n,a as $,b as t,e as z,i as f,H as O,q as E,W as T}from"./index-DvIhe9Wx.js";import{a as Y}from"./plshengchangongdan-xXUNx7N2.js";import{g as A}from"./basorg-BkZ2EbOy.js";const J={class:"search-bar"},Q={class:"pagination-container"},X={__name:"WoSelectorDialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(B,{emit:K}){const R=B,V=K,u=b(!1);k(()=>R.modelValue,e=>{u.value=e,e&&c()}),k(u,e=>V("update:modelValue",e));const a=D({woNo:"",contractNo:""}),o=D({pageNumber:1,pageSize:10,woNo:"",contractNo:""}),N=b([]),y=b(0),w=b(!1);function g(e){if(!e)return"";const l=new Date(e),m=_=>_.toString().padStart(2,"0");return`${l.getFullYear()}-${m(l.getMonth()+1)}-${m(l.getDate())}`}const c=async()=>{w.value=!0;try{o.woNo=a.woNo,o.contractNo=a.contractNo;const e=await Y(o);N.value=e.data.page.list,y.value=e.data.page.totalRow}catch{G.error("获取生产工单列表失败"),N.value=[]}finally{w.value=!1}},C=()=>{o.pageNumber=1,c()},F=()=>{a.woNo="",a.contractNo="",o.pageNumber=1,c()},L=e=>{o.pageSize=e,c()},P=e=>{o.pageNumber=e,c()},S=e=>{V("select",e),u.value=!1},W=e=>{S(e)},s=()=>{a.woNo="",a.contractNo="",o.pageNumber=1};return(e,l)=>{const m=p("el-input"),_=p("el-col"),v=p("el-button"),h=p("el-row"),d=p("el-table-column"),q=p("el-table"),M=p("el-pagination"),j=p("el-dialog"),i=H("loading");return x(),U(j,{title:"选择生产工单",modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=r=>u.value=r),width:"80%",onClosed:s},{default:n(()=>[$("div",J,[t(h,{gutter:20},{default:n(()=>[t(_,{span:8},{default:n(()=>[t(m,{modelValue:a.woNo,"onUpdate:modelValue":l[0]||(l[0]=r=>a.woNo=r),placeholder:"请输入生产工单号",onKeyup:z(C,["enter"])},null,8,["modelValue"])]),_:1}),t(_,{span:8},{default:n(()=>[t(m,{modelValue:a.contractNo,"onUpdate:modelValue":l[1]||(l[1]=r=>a.contractNo=r),placeholder:"请输入合同编号",onKeyup:z(C,["enter"])},null,8,["modelValue"])]),_:1}),t(_,{span:8},{default:n(()=>[t(v,{type:"primary",onClick:C},{default:n(()=>l[5]||(l[5]=[f("搜索")])),_:1}),t(v,{onClick:F},{default:n(()=>l[6]||(l[6]=[f("重置")])),_:1})]),_:1})]),_:1})]),O((x(),U(q,{data:N.value,border:"",style:{width:"100%","margin-top":"20px"},onRowClick:W,"highlight-current-row":""},{default:n(()=>[t(d,{type:"index",label:"序号",width:"60"}),t(d,{prop:"woNo",label:"生产工单号",width:"180"}),t(d,{prop:"contractNo",label:"合同编号",width:"150"}),t(d,{prop:"ipoNo",label:"生产订单号",width:"180"}),t(d,{prop:"planStartDate",label:"计划开始日期"},{default:n(({row:r})=>[f(E(g(r.planStartDate)),1)]),_:1}),t(d,{prop:"planFinishDate",label:"计划完成日期"},{default:n(({row:r})=>[f(E(g(r.planFinishDate)),1)]),_:1}),t(d,{prop:"writer",label:"录入人"}),t(d,{prop:"writetime",label:"录入时间"}),t(d,{label:"操作",width:"100"},{default:n(({row:r})=>[t(v,{type:"primary",size:"small",onClick:T(oe=>S(r),["stop"])},{default:n(()=>l[7]||(l[7]=[f("选择")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[i,w.value]]),$("div",Q,[t(M,{"current-page":o.pageNumber,"onUpdate:currentPage":l[2]||(l[2]=r=>o.pageNumber=r),"page-size":o.pageSize,"onUpdate:pageSize":l[3]||(l[3]=r=>o.pageSize=r),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:L,onCurrentChange:P},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])}}},se=I(X,[["__scopeId","data-v-dc210296"]]),Z={class:"search-bar"},ee={class:"pagination-container"},te={__name:"SupplierDialog",props:{modelValue:Boolean},emits:["update:modelValue","select"],setup(B,{emit:K}){const R=B,V=K,u=b(!1);k(()=>R.modelValue,s=>{u.value=s,s&&g()}),k(u,s=>V("update:modelValue",s));const a=D({descr:"",no:"",contactname:""}),o=D({pageNumber:1,pageSize:10,descr:"",no:"",contactname:"",type:1}),N=b([]),y=b(0),w=b(!1),g=async()=>{w.value=!0;try{o.descr=a.descr,o.no=a.no,o.contactname=a.contactname;const s=await A(o);N.value=s.data.page.list,y.value=s.data.page.totalRow}catch{G.error("获取供应商列表失败")}finally{w.value=!1}},c=()=>{o.pageNumber=1,g()},C=()=>{a.descr="",a.no="",a.contactname="",o.pageNumber=1,g()},F=s=>{o.pageSize=s,o.pageNumber=1,g()},L=s=>{o.pageNumber=s,g()},P=s=>{S(s)},S=s=>{V("select",s.descr),u.value=!1},W=()=>{a.descr="",a.no="",a.contactname="",o.pageNumber=1};return(s,e)=>{const l=p("el-input"),m=p("el-col"),_=p("el-row"),v=p("el-button"),h=p("el-table-column"),d=p("el-table"),q=p("el-pagination"),M=p("el-dialog"),j=H("loading");return x(),U(M,{title:"选择供应商",modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=i=>u.value=i),width:"60%",onClosed:W},{default:n(()=>[$("div",Z,[t(_,{gutter:20},{default:n(()=>[t(m,{span:12},{default:n(()=>[t(l,{modelValue:a.descr,"onUpdate:modelValue":e[0]||(e[0]=i=>a.descr=i),placeholder:"请输入供应商名称",onKeyup:z(c,["enter"])},null,8,["modelValue"])]),_:1}),t(m,{span:12},{default:n(()=>[t(l,{modelValue:a.no,"onUpdate:modelValue":e[1]||(e[1]=i=>a.no=i),placeholder:"请输入供应商编号",onKeyup:z(c,["enter"])},null,8,["modelValue"])]),_:1}),t(m,{span:12},{default:n(()=>[t(l,{modelValue:a.contactname,"onUpdate:modelValue":e[2]||(e[2]=i=>a.contactname=i),placeholder:"请输入供应商联系人",onKeyup:z(c,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{gutter:20,style:{"margin-top":"10px"}},{default:n(()=>[t(m,{span:24},{default:n(()=>[t(v,{type:"primary",onClick:c},{default:n(()=>e[6]||(e[6]=[f("搜索")])),_:1}),t(v,{onClick:C},{default:n(()=>e[7]||(e[7]=[f("重置")])),_:1})]),_:1})]),_:1})]),O((x(),U(d,{data:N.value,border:"",style:{width:"100%","margin-top":"20px"},onRowClick:P,"highlight-current-row":""},{default:n(()=>[t(h,{prop:"no",label:"供应商编号",width:"120"}),t(h,{prop:"descr",label:"供应商名称"}),t(h,{prop:"contactname",label:"供应商联系人"}),t(h,{label:"操作",width:"100"},{default:n(({row:i})=>[t(v,{type:"primary",size:"small",onClick:T(r=>S(i),["stop"])},{default:n(()=>e[8]||(e[8]=[f("选择")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,w.value]]),$("div",ee,[t(q,{"current-page":o.pageNumber,"onUpdate:currentPage":e[3]||(e[3]=i=>o.pageNumber=i),"page-size":o.pageSize,"onUpdate:pageSize":e[4]||(e[4]=i=>o.pageSize=i),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:F,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])}}},re=I(te,[["__scopeId","data-v-fa0935f8"]]);export{re as S,se as W};

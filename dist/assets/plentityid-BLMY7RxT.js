import{O as B,P as oe,Q as re,R as ue,_ as ne,g as H,r as y,k as de,s as se,h as p,G as pe,o as c,c as I,a as P,b as t,e as v,w as a,F as w,m as k,i as g,H as ie,l as me,q as N,E as V,A as ge}from"./index-Bwbtb0V1.js";function be(m){return B("/plentityid/getpage",m)}function fe(m){return B("/plentityid/get",m)}function ye(m){return oe("/plentityid/save",m)}function ce(m){return re("/plentityid/update",m)}function Ve(m){return ue("/plentityid/delete",m)}const Ce={class:"plentityid-management"},Ie={class:"action-bar"},ve={class:"pagination-container"},Se={__name:"plentityid",setup(m){const U=[{value:"正常",label:"正常"},{value:"冻结",label:"冻结"},{value:"作废",label:"作废"}],q=[{value:"0",label:"正常"},{value:"1",label:"停用"}],O=u=>{const e=q.find(n=>n.value==u);return e?e.label:"未知"},R=u=>{const e=U.find(n=>n.value==u);return e?e.label:"未知"},r=H({purchaserHqCode:"",supplierCode:"",supplierName:"",entityCode:"",poItemId:"",entityStatus:"",dataSource:"",dataSourceCreateTime:"",remark:"",ownerId:"",openId:"",status:"",flag:"",pageNumber:1,pageSize:10}),h=y([]),z=y(0),D=y(!1),f=y(!1),S=y("add"),E=de(()=>S.value==="add"?"新增实物ID":"编辑实物ID"),C=y(null),o=H({id:void 0,purchaserHqCode:"",supplierCode:"",supplierName:"",entityCode:"",poItemId:null,entityStatus:"",dataSource:"",dataSourceCreateTime:"",remark:"",ownerId:"",openId:"",status:"",flag:""}),K={purchaserHqCode:[{required:!0,message:"请输入采购方总部编码",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],supplierCode:[{required:!0,message:"请输入供应商编码",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],supplierName:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],entityCode:[{required:!0,message:"请输入实物编码",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],poItemId:[{required:!0,type:"number",message:"请输入有效的采购订单行项目ID",trigger:["blur","change"]}],entityStatus:[{required:!0,message:"请选择实物状态",trigger:"change"}],dataSource:[{required:!0,message:"请输入数据来源",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],dataSourceCreateTime:[{required:!0,message:"请输入数据来源创建时间",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],remark:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],ownerId:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],openId:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],status:[{required:!1,message:"请选择状态",trigger:"change"}],flag:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}]},d=async()=>{D.value=!0;try{const u=await be(r);h.value=u.data.page.list,z.value=u.data.page.totalRow}catch(u){console.error("获取实物ID列表失败",u),V.error("获取实物ID列表失败")}finally{D.value=!1}},F=u=>{r.pageSize=u,d()},L=u=>{r.pageNumber=u,d()},$=()=>{C.value&&C.value.resetFields(),Object.assign(o,{id:void 0,purchaserHqCode:"",supplierCode:"",supplierName:"",entityCode:"",poItemId:null,entityStatus:"",dataSource:"",dataSourceCreateTime:"",remark:"",ownerId:"",openId:"",status:"",flag:""})},j=()=>{Object.assign(r,{purchaserHqCode:"",supplierCode:"",supplierName:"",entityCode:"",poItemId:"",entityStatus:"",dataSource:"",dataSourceCreateTime:"",remark:"",ownerId:"",openId:"",status:"",flag:"",pageNumber:1}),d()},M=()=>{S.value="add",f.value=!0},A=async u=>{S.value="edit";const e=await fe({id:u.id});Object.assign(o,e.data.plentityid),f.value=!0},G=u=>{ge.confirm(`确认删除实物ID "${u.entityCode}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await Ve({id:u.id}),V.success("删除成功"),d()}catch(e){console.error("删除失败",e),V.error("删除失败")}}).catch(()=>{})},Q=()=>{C.value&&C.value.validate(async u=>{if(u)try{S.value==="add"?(await ye(o),V.success("新增成功")):(await ce(o),V.success("修改成功")),f.value=!1,d()}catch(e){console.error("保存失败",e),V.error("保存失败")}})};return se(()=>{d()}),(u,e)=>{const n=p("el-input"),_=p("el-option"),x=p("el-select"),b=p("el-button"),J=p("Refresh"),W=p("el-icon"),s=p("el-table-column"),X=p("el-table"),Y=p("el-pagination"),i=p("el-form-item"),T=p("el-col"),Z=p("el-row"),ee=p("el-form"),le=p("el-dialog"),te=pe("loading");return c(),I("div",Ce,[P("div",Ie,[t(n,{modelValue:r.purchaserHqCode,"onUpdate:modelValue":e[0]||(e[0]=l=>r.purchaserHqCode=l),placeholder:"请输入采购方总部编码",style:{width:"180px","margin-right":"10px"},clearable:"",onClear:d,onKeyup:v(d,["enter"])},null,8,["modelValue"]),t(n,{modelValue:r.supplierCode,"onUpdate:modelValue":e[1]||(e[1]=l=>r.supplierCode=l),placeholder:"请输入供应商编码",style:{width:"180px","margin-right":"10px"},clearable:"",onClear:d,onKeyup:v(d,["enter"])},null,8,["modelValue"]),t(n,{modelValue:r.supplierName,"onUpdate:modelValue":e[2]||(e[2]=l=>r.supplierName=l),placeholder:"请输入供应商名称",style:{width:"180px","margin-right":"10px"},clearable:"",onClear:d,onKeyup:v(d,["enter"])},null,8,["modelValue"]),t(n,{modelValue:r.entityCode,"onUpdate:modelValue":e[3]||(e[3]=l=>r.entityCode=l),placeholder:"请输入实物ID",style:{width:"180px","margin-right":"10px"},clearable:"",onClear:d,onKeyup:v(d,["enter"])},null,8,["modelValue"]),t(n,{modelValue:r.poItemId,"onUpdate:modelValue":e[4]||(e[4]=l=>r.poItemId=l),placeholder:"请输入采购订单行项目ID",style:{width:"150px","margin-right":"10px"},clearable:"",onClear:d,onKeyup:v(d,["enter"])},null,8,["modelValue"]),t(x,{modelValue:r.entityStatus,"onUpdate:modelValue":e[5]||(e[5]=l=>r.entityStatus=l),placeholder:"实物状态",style:{width:"120px","margin-right":"10px"}},{default:a(()=>[(c(),I(w,null,k(U,l=>t(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(x,{modelValue:r.status,"onUpdate:modelValue":e[6]||(e[6]=l=>r.status=l),placeholder:"状态",style:{width:"100px","margin-right":"10px"}},{default:a(()=>[(c(),I(w,null,k(q,l=>t(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(b,{type:"primary",onClick:d},{default:a(()=>e[24]||(e[24]=[g("搜索")])),_:1}),t(b,{type:"warning",onClick:j},{default:a(()=>[t(W,null,{default:a(()=>[t(J)]),_:1}),e[25]||(e[25]=g(" 刷新 "))]),_:1}),t(b,{type:"primary",style:{"margin-left":"auto"},onClick:M},{default:a(()=>e[26]||(e[26]=[g("新增实物ID")])),_:1})]),ie((c(),me(X,{data:h.value,border:"",style:{width:"100%"}},{default:a(()=>[t(s,{label:"序号",width:"80"},{default:a(l=>[g(N((r.pageNumber-1)*r.pageSize+l.$index+1),1)]),_:1}),t(s,{prop:"purchaserHqCode",label:"采购方总部编码"}),t(s,{prop:"supplierCode",label:"供应商编码"}),t(s,{prop:"supplierName",label:"供应商名称"}),t(s,{prop:"entityCode",label:"实物ID"}),t(s,{prop:"poItemId",label:"采购订单行项目ID"}),t(s,{prop:"entityStatus",label:"实物状态",width:"100"},{default:a(({row:l})=>[g(N(R(l.entityStatus)),1)]),_:1}),t(s,{prop:"dataSource",label:"数据来源"}),t(s,{prop:"dataSourceCreateTime",label:"数据来源创建时间"}),t(s,{prop:"remark",label:"备注"}),t(s,{prop:"ownerId",label:"数据拥有方"}),t(s,{prop:"openId",label:"数据可见方"}),t(s,{prop:"status",label:"状态",width:"80"},{default:a(({row:l})=>[g(N(O(l.status)),1)]),_:1}),t(s,{prop:"flag",label:"标记"}),t(s,{label:"操作",width:"200"},{default:a(({row:l})=>[t(b,{type:"primary",size:"small",onClick:ae=>A(l)},{default:a(()=>e[27]||(e[27]=[g("编辑")])),_:2},1032,["onClick"]),t(b,{type:"danger",size:"small",onClick:ae=>G(l)},{default:a(()=>e[28]||(e[28]=[g("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[te,D.value]]),P("div",ve,[t(Y,{"current-page":r.pageNumber,"onUpdate:currentPage":e[7]||(e[7]=l=>r.pageNumber=l),"page-size":r.pageSize,"onUpdate:pageSize":e[8]||(e[8]=l=>r.pageSize=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:z.value,onSizeChange:F,onCurrentChange:L},null,8,["current-page","page-size","total"])]),t(le,{title:E.value,modelValue:f.value,"onUpdate:modelValue":e[23]||(e[23]=l=>f.value=l),width:"800px",onClosed:$},{footer:a(()=>[t(b,{onClick:e[22]||(e[22]=l=>f.value=!1)},{default:a(()=>e[29]||(e[29]=[g("取消")])),_:1}),t(b,{type:"primary",onClick:Q},{default:a(()=>e[30]||(e[30]=[g("确定")])),_:1})]),default:a(()=>[t(ee,{ref_key:"formRef",ref:C,model:o,rules:K,"label-width":"120px"},{default:a(()=>[t(Z,{gutter:20},{default:a(()=>[t(T,{span:12},{default:a(()=>[t(i,{label:"采购方总部编码",prop:"purchaserHqCode"},{default:a(()=>[t(n,{modelValue:o.purchaserHqCode,"onUpdate:modelValue":e[9]||(e[9]=l=>o.purchaserHqCode=l),placeholder:"请输入采购方总部编码"},null,8,["modelValue"])]),_:1}),t(i,{label:"供应商编码",prop:"supplierCode"},{default:a(()=>[t(n,{modelValue:o.supplierCode,"onUpdate:modelValue":e[10]||(e[10]=l=>o.supplierCode=l),placeholder:"请输入供应商编码"},null,8,["modelValue"])]),_:1}),t(i,{label:"供应商名称",prop:"supplierName"},{default:a(()=>[t(n,{modelValue:o.supplierName,"onUpdate:modelValue":e[11]||(e[11]=l=>o.supplierName=l),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1}),t(i,{label:"实物ID",prop:"entityCode"},{default:a(()=>[t(n,{modelValue:o.entityCode,"onUpdate:modelValue":e[12]||(e[12]=l=>o.entityCode=l),placeholder:"请输入实物编码"},null,8,["modelValue"])]),_:1}),t(i,{label:"采购订单行项目ID",prop:"poItemId"},{default:a(()=>[t(n,{modelValue:o.poItemId,"onUpdate:modelValue":e[13]||(e[13]=l=>o.poItemId=l),modelModifiers:{number:!0},placeholder:"请输入采购订单行项目ID",type:"number"},null,8,["modelValue"])]),_:1}),t(i,{label:"实物状态",prop:"entityStatus"},{default:a(()=>[t(x,{modelValue:o.entityStatus,"onUpdate:modelValue":e[14]||(e[14]=l=>o.entityStatus=l),placeholder:"请选择实物状态"},{default:a(()=>[(c(),I(w,null,k(U,l=>t(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"数据来源",prop:"dataSource"},{default:a(()=>[t(n,{modelValue:o.dataSource,"onUpdate:modelValue":e[15]||(e[15]=l=>o.dataSource=l),placeholder:"请输入数据来源"},null,8,["modelValue"])]),_:1})]),_:1}),t(T,{span:12},{default:a(()=>[t(i,{label:"数据来源创建时间",prop:"dataSourceCreateTime"},{default:a(()=>[t(n,{modelValue:o.dataSourceCreateTime,"onUpdate:modelValue":e[16]||(e[16]=l=>o.dataSourceCreateTime=l),placeholder:"请输入数据来源创建时间"},null,8,["modelValue"])]),_:1}),t(i,{label:"备注",prop:"remark"},{default:a(()=>[t(n,{modelValue:o.remark,"onUpdate:modelValue":e[17]||(e[17]=l=>o.remark=l),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),t(i,{label:"数据拥有方",prop:"ownerId"},{default:a(()=>[t(n,{modelValue:o.ownerId,"onUpdate:modelValue":e[18]||(e[18]=l=>o.ownerId=l),placeholder:"请输入所有者ID"},null,8,["modelValue"])]),_:1}),t(i,{label:"数据可见方",prop:"openId"},{default:a(()=>[t(n,{modelValue:o.openId,"onUpdate:modelValue":e[19]||(e[19]=l=>o.openId=l),placeholder:"请输入OpenID"},null,8,["modelValue"])]),_:1}),t(i,{label:"状态",prop:"status"},{default:a(()=>[t(x,{modelValue:o.status,"onUpdate:modelValue":e[20]||(e[20]=l=>o.status=l),placeholder:"请选择状态"},{default:a(()=>[(c(),I(w,null,k(q,l=>t(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"标记",prop:"flag"},{default:a(()=>[t(n,{modelValue:o.flag,"onUpdate:modelValue":e[21]||(e[21]=l=>o.flag=l),placeholder:"请输入标记"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},xe=ne(Se,[["__scopeId","data-v-faca85f9"]]);export{xe as default};

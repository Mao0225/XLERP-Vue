import{_ as le,g as z,r as c,k as ae,s as oe,h as s,G as te,o as U,c as O,a as T,b as l,e as N,w as o,i as m,H as re,l as ne,q as S,F as de,m as se,E as b,A as ue}from"./index-DivwvCM9.js";import{g as pe,a as ie,d as me,c as ge,u as ce}from"./basorg-CEO7C1K8.js";const be={class:"basorg-management"},fe={class:"action-bar"},Ve={class:"pagination-container"},ye={__name:"basorgType1",setup(ve){const C=[{id:1,value:"供应商"},{id:2,value:"运输商"},{id:3,value:"客户"},{id:99,value:"其他"}],R=n=>{const e=C.find(r=>r.id===n);return e?e.value:"未知"},u=z({no:"",descr:"",type:1,pageNumber:1,pageSize:10}),h=c([]),B=c(0),_=c(!1),f=c(!1),v=c("add"),E=ae(()=>v.value==="add"?"新增供应商":"编辑供应商"),y=c(null),x=c("basic"),t=z({id:void 0,no:"",descr:"",bankcode:"",contactname:"",address:"",city:"",province:"",country:"",postalcode:"",phone:"",fax:"",bank:"",taxcode:"",email:"",isdelete:0,memo:"",status:0,type:1,contactheadship:"",flag:null,area:""}),F={no:[{required:!0,message:"请输入供应商编号",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],descr:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],bankcode:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],contactname:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],address:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],city:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],province:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],country:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],postalcode:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],phone:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],fax:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],bank:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],taxcode:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱格式",trigger:["blur","change"]},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],memo:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],contactheadship:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],area:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}]},p=async()=>{_.value=!0;try{const n=await pe(u);h.value=n.data.page.list,B.value=n.data.page.totalRow}catch(n){console.error("获取供应商列表失败",n),b.error("获取供应商列表失败")}finally{_.value=!1}},L=n=>{u.pageSize=n,p()},q=n=>{u.pageNumber=n,p()},D=()=>{y.value&&y.value.resetFields(),Object.assign(t,{id:void 0,no:"",descr:"",bankcode:"",contactname:"",address:"",city:"",province:"",country:"",postalcode:"",phone:"",fax:"",bank:"",taxcode:"",email:"",isdelete:0,memo:"",status:0,type:1,contactheadship:"",flag:null,area:""}),x.value="basic"},$=()=>{u.no="",u.descr="",u.pageNumber=1,p()},j=()=>{v.value="add",f.value=!0},K=async n=>{v.value="edit";try{const e=await ie({id:n.id});Object.assign(t,e.data.basOrg),f.value=!0}catch(e){console.error("获取供应商详情失败",e),b.error("获取供应商详情失败")}},M=n=>{ue.confirm(`确认删除供应商"${n.no}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await me({id:n.id}),b.success("删除成功"),p()}catch(e){console.error("删除供应商失败",e),b.error("删除供应商失败")}}).catch(()=>{})},A=()=>{y.value&&y.value.validate(async n=>{if(n)try{v.value==="add"?(await ge(t),b.success("新增成功")):(await ce(t),b.success("修改成功")),f.value=!1,p()}catch(e){console.error("保存供应商失败",e),b.error("保存供应商失败")}})};return oe(()=>{p()}),(n,e)=>{const r=s("el-input"),g=s("el-button"),I=s("Refresh"),P=s("el-icon"),i=s("el-table-column"),G=s("el-table"),H=s("el-pagination"),d=s("el-form-item"),J=s("el-option"),Q=s("el-select"),V=s("el-col"),k=s("el-row"),w=s("el-tab-pane"),W=s("el-tabs"),X=s("el-form"),Y=s("el-dialog"),Z=te("loading");return U(),O("div",be,[T("div",fe,[l(r,{modelValue:u.no,"onUpdate:modelValue":e[0]||(e[0]=a=>u.no=a),placeholder:"请输入供应商编号查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:N(p,["enter"])},null,8,["modelValue"]),l(r,{modelValue:u.descr,"onUpdate:modelValue":e[1]||(e[1]=a=>u.descr=a),placeholder:"请输入供应商名称查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:N(p,["enter"])},null,8,["modelValue"]),l(g,{type:"primary",onClick:p},{default:o(()=>e[25]||(e[25]=[m("搜索")])),_:1}),l(g,{type:"warning",onClick:$},{default:o(()=>[l(P,null,{default:o(()=>[l(I)]),_:1}),e[26]||(e[26]=m(" 刷新 "))]),_:1}),l(g,{type:"primary",style:{"margin-left":"auto"},onClick:j},{default:o(()=>e[27]||(e[27]=[m("新增供应商")])),_:1})]),re((U(),ne(G,{data:h.value,border:"",style:{width:"100%"}},{default:o(()=>[l(i,{type:"index",label:"序号",width:"80"}),l(i,{prop:"no",label:"供应商编号"}),l(i,{prop:"descr",label:"供应商名称"}),l(i,{prop:"contactname",label:"联系人"}),l(i,{prop:"phone",label:"联系电话",width:"120"}),l(i,{prop:"email",label:"邮箱",width:"150"}),l(i,{prop:"type",label:"供应商类型",width:"100"},{default:o(({row:a})=>[m(S(R(a.type)),1)]),_:1}),l(i,{prop:"area",label:"所属区域",width:"100"}),l(i,{prop:"city",label:"城市",width:"80"}),l(i,{prop:"status",label:"状态",width:"80"},{default:o(({row:a})=>[m(S(a.status===0?"正常":"停用"),1)]),_:1}),l(i,{label:"操作",width:"200",fixed:"right"},{default:o(({row:a})=>[l(g,{type:"primary",size:"small",onClick:ee=>K(a)},{default:o(()=>e[28]||(e[28]=[m("编辑")])),_:2},1032,["onClick"]),l(g,{type:"danger",size:"small",onClick:ee=>M(a)},{default:o(()=>e[29]||(e[29]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,_.value]]),T("div",Ve,[l(H,{"current-page":u.pageNumber,"onUpdate:currentPage":e[2]||(e[2]=a=>u.pageNumber=a),"page-size":u.pageSize,"onUpdate:pageSize":e[3]||(e[3]=a=>u.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:L,onCurrentChange:q},null,8,["current-page","page-size","total"])]),l(Y,{title:E.value,modelValue:f.value,"onUpdate:modelValue":e[24]||(e[24]=a=>f.value=a),width:"900px",onClosed:D},{footer:o(()=>[l(g,{onClick:e[23]||(e[23]=a=>f.value=!1)},{default:o(()=>e[30]||(e[30]=[m("取消")])),_:1}),l(g,{type:"primary",onClick:A},{default:o(()=>e[31]||(e[31]=[m("确定")])),_:1})]),default:o(()=>[l(X,{ref_key:"formRef",ref:y,model:t,rules:F,"label-width":"100px"},{default:o(()=>[l(W,{modelValue:x.value,"onUpdate:modelValue":e[22]||(e[22]=a=>x.value=a)},{default:o(()=>[l(w,{label:"基本信息",name:"basic"},{default:o(()=>[l(k,{gutter:20},{default:o(()=>[l(V,{span:12},{default:o(()=>[l(d,{label:"供应商编号",prop:"no"},{default:o(()=>[l(r,{modelValue:t.no,"onUpdate:modelValue":e[4]||(e[4]=a=>t.no=a),placeholder:"请输入供应商编号"},null,8,["modelValue"])]),_:1}),l(d,{label:"供应商名称",prop:"descr"},{default:o(()=>[l(r,{modelValue:t.descr,"onUpdate:modelValue":e[5]||(e[5]=a=>t.descr=a),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"类型",prop:"type"},{default:o(()=>[l(Q,{modelValue:t.type,"onUpdate:modelValue":e[6]||(e[6]=a=>t.type=a),placeholder:"请选择供应商类型",disabled:!0},{default:o(()=>[(U(),O(de,null,se(C,a=>l(J,{key:a.id,label:a.value,value:a.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"所属区域",prop:"area"},{default:o(()=>[l(r,{modelValue:t.area,"onUpdate:modelValue":e[7]||(e[7]=a=>t.area=a),placeholder:"请输入所属区域"},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{span:12},{default:o(()=>[l(d,{label:"联系人",prop:"contactname"},{default:o(()=>[l(r,{modelValue:t.contactname,"onUpdate:modelValue":e[8]||(e[8]=a=>t.contactname=a),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),l(d,{label:"联系人职务",prop:"contactheadship"},{default:o(()=>[l(r,{modelValue:t.contactheadship,"onUpdate:modelValue":e[9]||(e[9]=a=>t.contactheadship=a),placeholder:"请输入联系人职务"},null,8,["modelValue"])]),_:1}),l(d,{label:"联系电话",prop:"phone"},{default:o(()=>[l(r,{modelValue:t.phone,"onUpdate:modelValue":e[10]||(e[10]=a=>t.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),l(d,{label:"传真号码",prop:"fax"},{default:o(()=>[l(r,{modelValue:t.fax,"onUpdate:modelValue":e[11]||(e[11]=a=>t.fax=a),placeholder:"请输入传真号码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{label:"地址信息",name:"address"},{default:o(()=>[l(k,{gutter:20},{default:o(()=>[l(V,{span:12},{default:o(()=>[l(d,{label:"详细地址",prop:"address"},{default:o(()=>[l(r,{modelValue:t.address,"onUpdate:modelValue":e[12]||(e[12]=a=>t.address=a),placeholder:"请输入详细地址",type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),l(d,{label:"所在城市",prop:"city"},{default:o(()=>[l(r,{modelValue:t.city,"onUpdate:modelValue":e[13]||(e[13]=a=>t.city=a),placeholder:"请输入所在城市"},null,8,["modelValue"])]),_:1}),l(d,{label:"所在省份",prop:"province"},{default:o(()=>[l(r,{modelValue:t.province,"onUpdate:modelValue":e[14]||(e[14]=a=>t.province=a),placeholder:"请输入所在省份"},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{span:12},{default:o(()=>[l(d,{label:"所在国家",prop:"country"},{default:o(()=>[l(r,{modelValue:t.country,"onUpdate:modelValue":e[15]||(e[15]=a=>t.country=a),placeholder:"请输入所在国家"},null,8,["modelValue"])]),_:1}),l(d,{label:"邮政编码",prop:"postalcode"},{default:o(()=>[l(r,{modelValue:t.postalcode,"onUpdate:modelValue":e[16]||(e[16]=a=>t.postalcode=a),placeholder:"请输入邮政编码"},null,8,["modelValue"])]),_:1}),l(d,{label:"电子邮箱",prop:"email"},{default:o(()=>[l(r,{modelValue:t.email,"onUpdate:modelValue":e[17]||(e[17]=a=>t.email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{label:"财务信息",name:"finance"},{default:o(()=>[l(k,{gutter:20},{default:o(()=>[l(V,{span:12},{default:o(()=>[l(d,{label:"开户银行",prop:"bank"},{default:o(()=>[l(r,{modelValue:t.bank,"onUpdate:modelValue":e[18]||(e[18]=a=>t.bank=a),placeholder:"请输入开户银行"},null,8,["modelValue"])]),_:1}),l(d,{label:"银行账号",prop:"bankcode"},{default:o(()=>[l(r,{modelValue:t.bankcode,"onUpdate:modelValue":e[19]||(e[19]=a=>t.bankcode=a),placeholder:"请输入银行账号"},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{span:12},{default:o(()=>[l(d,{label:"税号",prop:"taxcode"},{default:o(()=>[l(r,{modelValue:t.taxcode,"onUpdate:modelValue":e[20]||(e[20]=a=>t.taxcode=a),placeholder:"请输入税号"},null,8,["modelValue"])]),_:1}),l(d,{label:"备注信息",prop:"memo"},{default:o(()=>[l(r,{modelValue:t.memo,"onUpdate:modelValue":e[21]||(e[21]=a=>t.memo=a),placeholder:"请输入备注信息",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},ke=le(ye,[["__scopeId","data-v-1f5130bc"]]);export{ke as default};

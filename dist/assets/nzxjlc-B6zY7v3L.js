import{O as $,P as Fe,Q as qe,R as Re,_ as De,f as $e,g as Z,r as m,k as We,s as Be,h as f,G as Oe,o as h,c as C,a as k,b as l,e as x,w as r,i as g,x as J,a6 as Ae,H as ie,l as de,F as me,m as pe,ai as ce,q as Ze,p as Je,E as b,A as Qe,B as Ye}from"./index-DivwvCM9.js";import{a as Ee}from"./file-DG1x66KO.js";import{W as Ke}from"./WoNoSelector-BU9BVcDC.js";import{g as Ie}from"./basorg-CEO7C1K8.js";import"./plshengchangongdan-x5Bc9PHG.js";function Pe(c){return $("/clnzxjLc/getpage",c)}function He(c){return $("/clnzxjLc/get",c)}function Ge(c){return Fe("/clnzxjLc/save",c)}function Xe(c){return qe("/clnzxjLc/update",c)}function el(c){return Re("/clnzxjLc/delete",c)}function ll(c){return $("/clnzxjLc/getWoNoList",c)}function ge(c){return $("/Basno/getNewNoNyName",{basname:c})}const al={class:"nzxjLc-management"},tl={class:"action-bar"},rl=["onClick"],ol={class:"pagination-container"},nl={key:0,class:"uploaded-files"},ul=["onClick"],sl={class:"pagination-container"},il={__name:"nzxjlc",setup(c){const fe=Ye,z=$e(),Q=()=>(console.log("获取登录用户名称",z.descr),z.descr),i=Z({mafactory:"",matMaterial:"",orderno:"",matRecheckNo:"",pageNumber:1,pageSize:10}),Y=m([]),E=m(0),W=m(!1),v=m(!1),K=m([]),I=m(0),B=m(!1),U=m(!1),P=m([]),H=m(0),O=m(!1),y=Z({descr:"",type:1,pageNumber:1,pageSize:10}),w=m(!1),_=m("add"),be=We(()=>_.value==="add"?"新增数据":"编辑数据"),S=m(null),L=m(null),T=m([]),t=Z({id:void 0,contractNo:"",woNo:"",ipoNo:"",mafactory:"",maQuality:"",matMaterial:"",orderno:"",matRecheckNo:"",chemAl:0,chemSi:0,chemFe:0,chemCu:0,chemMn:0,chemMg:0,chemZn:0,chemTi:0,chemCr:0,sampleNumber:"",tensileStrength:0,elongation:0,hardness:0,leavefactoryDate:"",detectionTime:"",certificate:"[]",writeTime:"",writer:Q(),status:0,isdelete:0,basno:""}),ye={mafactory:[{required:!0,message:"请选择原材料制造商",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],maQuality:[{required:!0,message:"请输入材质",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],matMaterial:[{required:!0,message:"请输入牌号",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],orderno:[{required:!0,message:"请输入入库单号",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],matRecheckNo:[{required:!0,message:"请输入来料检测批测号",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],chemAl:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemSi:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemFe:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemCu:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemMn:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemMg:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemZn:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemTi:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],chemCr:[{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],sampleNumber:[{required:!0,message:"请输入样品编号",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],tensileStrength:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],elongation:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],hardness:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:["blur","change"]}],leavefactoryDate:[{required:!0,message:"请输入出厂日期",trigger:"change"}],detectionTime:[{required:!0,message:"请输入入厂日期",trigger:"change"}],contractNo:[{required:!0,message:"长度不能超过50个字符",trigger:"blur"}],woNo:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],ipoNo:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],basno:[{max:50,message:"请获取单据号",trigger:"blur"}]},G=()=>{U.value=!0,M()},M=async()=>{O.value=!0;try{const o=await Ie(y);P.value=o.data.page.list,H.value=o.data.page.totalRow}catch(o){console.error("获取供应商列表失败",o),b.error("获取供应商列表失败")}finally{O.value=!1}},Ne=o=>{y.pageSize=o,M()},Ve=o=>{y.pageNumber=o,M()},X=o=>{t.mafactory=o.descr,t.mafactoryId=o.id,U.value=!1},he=o=>{X(o)},j=m(""),ee=()=>{j.value="woNo",v.value=!0,F()},le=()=>{j.value="contractNo",v.value=!0,F()},ae=()=>{j.value="ipoNo",v.value=!0,F()},ve=o=>{switch(j.value){case"contractNo":t.contractNo=o.contractNo||"";break;case"woNo":t.woNo=o.woNo||"";break;case"ipoNo":t.ipoNo=o.ipoNo||"";break}v.value=!1},F=async(o="")=>{B.value=!0;try{const e=await ll({pageNumber:1,pageSize:10,woNo:o});K.value=e.data.page.list,I.value=e.data.page.totalRow}catch(e){console.error("获取合同号列表失败",e),b.error("获取合同号列表失败")}finally{B.value=!1}},p=async()=>{W.value=!0;try{const o=await Pe(i);Y.value=o.data.page.list,E.value=o.data.page.totalRow}catch(o){console.error("获取数据列表失败",o),b.error("获取数据列表失败")}finally{W.value=!1}},we=o=>{i.pageSize=o,p()},Ce=o=>{i.pageNumber=o,p()},te=()=>{S.value&&S.value.resetFields(),L.value&&L.value.clearFiles(),T.value=[],Object.assign(t,{id:void 0,contractNo:"",woNo:"",ipoNo:"",mafactory:"",mafactoryId:"",maQuality:"",matMaterial:"",orderno:"",matRecheckNo:"",chemAl:0,chemSi:0,chemFe:0,chemCu:0,chemMn:0,chemMg:0,chemZn:0,chemTi:0,chemCr:0,sampleNumber:"",tensileStrength:0,elongation:0,hardness:0,leavefactoryDate:"",detectionTime:"",certificate:"[]",writeTime:"",writer:Q(),status:0,isdelete:0,basno:""})},Se=()=>{i.contractNo="",i.woNo="",i.ipoNo="",i.mafactory="",i.matMaterial="",i.orderno="",i.matRecheckNo="",i.pageNumber=1,p()},Me=async()=>{_.value="add",te(),t.writer=z.descr||"未知用户";try{if(q.value)t.basno=q.value,q.value="";else{const o=await ge("nzxjlc");o.code===200?t.basno=o.data.fullNoNyName:b.warning("获取单据号失败，可手动填写")}}catch(o){console.error("获取单据号异常",o),b.error("获取单据号失败")}w.value=!0},ke=async o=>{_.value="edit";const e=await He({id:o.id});Object.assign(t,e.data.nzxjLc),t.writer||(t.writer=z.descr||"未知用户");try{JSON.parse(t.certificate)}catch{if(t.certificate){const d=t.certificate.split("-");t.certificate=JSON.stringify(d.map(N=>({name:N.split("/").pop(),url:`/api/upload/${N}`})))}else t.certificate="[]"}T.value=JSON.parse(t.certificate),w.value=!0},xe=o=>{Qe.confirm(`确认删除数据"${o.no}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await el({id:o.id}),b.success("删除成功"),p()}catch(e){console.error("删除数据失败",e),b.error("删除数据失败")}}).catch(()=>{})},ze=()=>{S.value&&S.value.validate(async o=>{if(o)try{if(!t.basno){b.error("单据号未生成，请刷新重试");return}const e=new Date,n=e.getFullYear(),d=String(e.getMonth()+1).padStart(2,"0"),N=String(e.getDate()).padStart(2,"0"),u=String(e.getHours()).padStart(2,"0"),R=String(e.getMinutes()).padStart(2,"0"),D=String(e.getSeconds()).padStart(2,"0");if(t.writeTime=`${n}-${d}-${N} ${u}:${R}:${D}`,_.value==="add"){await Ge(t),b.success("新增成功");try{const s=await ge("nzxjlc");s.code===200&&(q.value=s.data.fullNoNyName)}catch(s){console.error("获取新单据号异常",s)}}else await Xe(t),b.success("修改成功");w.value=!1,p()}catch(e){console.error("保存数据失败",e),b.error("保存数据失败")}})},q=m(""),Ue=async o=>{const e=new FormData;e.append("file",o.raw);try{const n=await Ee(e);if(n.success&&n.data&&n.data.url){const d=fe+n.data.url,N=JSON.parse(t.certificate);N.push({name:o.name,url:d}),t.certificate=JSON.stringify(N),T.value.push({name:o.name,url:d}),b.success(`${o.name} 上传成功`)}else throw new Error(n.msg||"文件上传失败")}catch(n){console.error("文件上传失败",n),b.error(`${o.name} 上传失败`),L.value.clearFiles()}},_e=o=>{const e=JSON.parse(t.certificate);e.splice(o,1),t.certificate=JSON.stringify(e),T.value.splice(o,1)},re=o=>{window.open(o,"_blank")};return Be(()=>{p()}),(o,e)=>{const n=f("el-input"),d=f("el-button"),N=f("el-icon"),u=f("el-table-column"),R=f("el-table"),D=f("el-pagination"),s=f("el-form-item"),oe=f("el-col"),ne=f("el-date-picker"),Le=f("el-upload"),Te=f("el-row"),je=f("el-form"),ue=f("el-dialog"),se=Oe("loading");return h(),C("div",al,[k("div",tl,[l(n,{modelValue:i.mafactory,"onUpdate:modelValue":e[0]||(e[0]=a=>i.mafactory=a),placeholder:"请输入原材料制造商查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:x(p,["enter"])},null,8,["modelValue"]),l(n,{modelValue:i.matMaterial,"onUpdate:modelValue":e[1]||(e[1]=a=>i.matMaterial=a),placeholder:"请输入牌号查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:x(p,["enter"])},null,8,["modelValue"]),l(n,{modelValue:i.orderno,"onUpdate:modelValue":e[2]||(e[2]=a=>i.orderno=a),placeholder:"请输入入库单号查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:x(p,["enter"])},null,8,["modelValue"]),l(n,{modelValue:i.matRecheckNo,"onUpdate:modelValue":e[3]||(e[3]=a=>i.matRecheckNo=a),placeholder:"请输入来料检验批次号",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:x(p,["enter"])},null,8,["modelValue"]),l(d,{type:"primary",onClick:p},{default:r(()=>e[38]||(e[38]=[g("搜索")])),_:1}),l(d,{type:"warning",onClick:Se},{default:r(()=>[l(N,null,{default:r(()=>[l(J(Ae))]),_:1}),e[39]||(e[39]=g(" 刷新 "))]),_:1}),l(d,{type:"primary",style:{"margin-left":"auto"},onClick:Me},{default:r(()=>e[40]||(e[40]=[g("新增")])),_:1})]),ie((h(),de(R,{data:Y.value,border:"",style:{width:"100%"}},{default:r(()=>[l(u,{type:"index",label:"序号",width:"80"}),l(u,{prop:"basno",label:"单据号"}),l(u,{prop:"contractNo",label:"合同编号"}),l(u,{prop:"woNo",label:"生产工单号"}),l(u,{prop:"ipoNo",label:"生产订单号"}),l(u,{prop:"writer",label:"录入人"}),l(u,{prop:"writeTime",label:"录入时间"}),l(u,{prop:"mafactory",label:"原材料制造商"}),l(u,{prop:"maQuality",label:"材质"}),l(u,{prop:"matMaterial",label:"牌号"}),l(u,{prop:"orderno",label:"入库单号"}),l(u,{prop:"matRecheckNo",label:"来料检验批次号"}),l(u,{prop:"chemAl",label:"化学成分分析-Al"}),l(u,{prop:"chemSi",label:"化学成分分析-Si"}),l(u,{prop:"chemFe",label:"化学成分分析-Fe"}),l(u,{prop:"chemCu",label:"化学成分分析-Cu"}),l(u,{prop:"chemMn",label:"化学成分分析-Mn"}),l(u,{prop:"chemMg",label:"化学成分分析-Mg"}),l(u,{prop:"chemZn",label:"化学成分分析-Zn"}),l(u,{prop:"chemTi",label:"化学成分分析-Ti"}),l(u,{prop:"chemCr",label:"化学成分分析-Cr"}),l(u,{prop:"sampleNumber",label:"样品编号"}),l(u,{prop:"tensileStrength",label:"机械性能-抗拉强度"}),l(u,{prop:"elongation",label:"机械性能-断后伸长率"}),l(u,{prop:"hardness",label:"机械性能-硬度"}),l(u,{prop:"leavefactoryDate",label:"原材料出厂检测日期",width:"120"}),l(u,{prop:"detectionTime",label:"原材料入厂检测日期",width:"120"}),l(u,{prop:"certificate",label:"质量证明书"},{default:r(({row:a})=>[(h(!0),C(me,null,pe(JSON.parse(a.certificate||"[]"),(V,A)=>(h(),C("div",{key:A},[l(J(ce),{content:V.name,placement:"top"},{default:r(()=>[k("span",{class:"file-link",onClick:dl=>re(V.url,V.name)}," 打开文件 ",8,rl)]),_:2},1032,["content"])]))),128))]),_:1}),l(u,{label:"操作",width:"200"},{default:r(({row:a})=>[l(d,{type:"primary",size:"small",onClick:V=>ke(a)},{default:r(()=>e[41]||(e[41]=[g("编辑")])),_:2},1032,["onClick"]),l(d,{type:"danger",size:"small",onClick:V=>xe(a)},{default:r(()=>e[42]||(e[42]=[g("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[se,W.value]]),k("div",ol,[l(D,{"current-page":i.pageNumber,"onUpdate:currentPage":e[4]||(e[4]=a=>i.pageNumber=a),"page-size":i.pageSize,"onUpdate:pageSize":e[5]||(e[5]=a=>i.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:E.value,onSizeChange:we,onCurrentChange:Ce},null,8,["current-page","page-size","total"])]),l(ue,{title:be.value,modelValue:w.value,"onUpdate:modelValue":e[32]||(e[32]=a=>w.value=a),width:"800px",onClosed:te},{footer:r(()=>[l(d,{onClick:e[31]||(e[31]=a=>w.value=!1)},{default:r(()=>e[49]||(e[49]=[g("取消")])),_:1}),l(d,{type:"primary",onClick:ze},{default:r(()=>e[50]||(e[50]=[g("确定")])),_:1})]),default:r(()=>[l(je,{ref_key:"formRef",ref:S,model:t,rules:ye,"label-width":"140px"},{default:r(()=>[l(Te,{gutter:20},{default:r(()=>[l(oe,{span:12},{default:r(()=>[l(s,{label:"合同编号",prop:"contractNo"},{default:r(()=>[l(n,{modelValue:t.contractNo,"onUpdate:modelValue":e[6]||(e[6]=a=>t.contractNo=a),placeholder:"选择合同编号",readonly:"",onClick:le},{append:r(()=>[l(d,{onClick:le,size:"small"},{default:r(()=>e[43]||(e[43]=[g("选择")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"生产工单号",prop:"woNo"},{default:r(()=>[l(n,{modelValue:t.woNo,"onUpdate:modelValue":e[7]||(e[7]=a=>t.woNo=a),placeholder:"选择生产工单号",readonly:"",onClick:ee},{append:r(()=>[l(d,{onClick:ee,size:"small"},{default:r(()=>e[44]||(e[44]=[g("选择")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"生产订单号",prop:"ipoNo"},{default:r(()=>[l(n,{modelValue:t.ipoNo,"onUpdate:modelValue":e[8]||(e[8]=a=>t.ipoNo=a),placeholder:"选择生产订单号",readonly:"",onClick:ae},{append:r(()=>[l(d,{onClick:ae,size:"small"},{default:r(()=>e[45]||(e[45]=[g("选择")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"录入人",prop:"writer"},{default:r(()=>[l(n,{modelValue:t.writer,"onUpdate:modelValue":e[9]||(e[9]=a=>t.writer=a),placeholder:"录入人",readonly:""},null,8,["modelValue"])]),_:1}),l(s,{label:"单据号",prop:"basno"},{default:r(()=>[l(n,{modelValue:t.basno,"onUpdate:modelValue":e[10]||(e[10]=a=>t.basno=a),placeholder:"自动生成",readonly:""},null,8,["modelValue"])]),_:1}),l(s,{label:"原材料制造商",prop:"mafactory"},{default:r(()=>[l(n,{modelValue:t.mafactory,"onUpdate:modelValue":e[11]||(e[11]=a=>t.mafactory=a),placeholder:"选择原材料制造商",readonly:"",onClick:G},{append:r(()=>[l(d,{onClick:G,size:"small"},{default:r(()=>e[46]||(e[46]=[g("选择")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"材质",prop:"maQuality"},{default:r(()=>[l(n,{modelValue:t.maQuality,"onUpdate:modelValue":e[12]||(e[12]=a=>t.maQuality=a),placeholder:"请输入材质"},null,8,["modelValue"])]),_:1}),l(s,{label:"牌号",prop:"matMaterial"},{default:r(()=>[l(n,{modelValue:t.matMaterial,"onUpdate:modelValue":e[13]||(e[13]=a=>t.matMaterial=a),placeholder:"请输入牌号"},null,8,["modelValue"])]),_:1}),l(s,{label:"入库单号",prop:"orderno"},{default:r(()=>[l(n,{modelValue:t.orderno,"onUpdate:modelValue":e[14]||(e[14]=a=>t.orderno=a),placeholder:"请输入入库单号"},null,8,["modelValue"])]),_:1}),l(s,{label:"来料检验批次号",prop:"matRecheckNo"},{default:r(()=>[l(n,{modelValue:t.matRecheckNo,"onUpdate:modelValue":e[15]||(e[15]=a=>t.matRecheckNo=a),placeholder:"请输入来料检验批次号"},null,8,["modelValue"])]),_:1}),l(s,{label:"样品编号",prop:"sampleNumber"},{default:r(()=>[l(n,{modelValue:t.sampleNumber,"onUpdate:modelValue":e[16]||(e[16]=a=>t.sampleNumber=a),placeholder:"请输入样品编号"},null,8,["modelValue"])]),_:1}),l(s,{label:"机械性能-抗拉强度",prop:"tensileStrength"},{default:r(()=>[l(n,{modelValue:t.tensileStrength,"onUpdate:modelValue":e[17]||(e[17]=a=>t.tensileStrength=a),modelModifiers:{number:!0},placeholder:"请输入机械性能-抗拉强度",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"机械性能-断后伸长率",prop:"elongation"},{default:r(()=>[l(n,{modelValue:t.elongation,"onUpdate:modelValue":e[18]||(e[18]=a=>t.elongation=a),modelModifiers:{number:!0},placeholder:"请输入机械性能-断后伸长率",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"机械性能-硬度",prop:"hardness"},{default:r(()=>[l(n,{modelValue:t.hardness,"onUpdate:modelValue":e[19]||(e[19]=a=>t.hardness=a),modelModifiers:{number:!0},placeholder:"请输入机械性能-硬度",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),l(oe,{span:12},{default:r(()=>[l(s,{label:"化学成分分析-Al",prop:"chemAl"},{default:r(()=>[l(n,{modelValue:t.chemAl,"onUpdate:modelValue":e[20]||(e[20]=a=>t.chemAl=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Al",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Si",prop:"chemSi"},{default:r(()=>[l(n,{modelValue:t.chemSi,"onUpdate:modelValue":e[21]||(e[21]=a=>t.chemSi=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Si",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Fe",prop:"chemFe"},{default:r(()=>[l(n,{modelValue:t.chemFe,"onUpdate:modelValue":e[22]||(e[22]=a=>t.chemFe=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Fe",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Cu",prop:"chemCu"},{default:r(()=>[l(n,{modelValue:t.chemCu,"onUpdate:modelValue":e[23]||(e[23]=a=>t.chemCu=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Cu",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Mg",prop:"chemMg"},{default:r(()=>[l(n,{modelValue:t.chemMg,"onUpdate:modelValue":e[24]||(e[24]=a=>t.chemMg=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Mg",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Zn",prop:"chemZn"},{default:r(()=>[l(n,{modelValue:t.chemZn,"onUpdate:modelValue":e[25]||(e[25]=a=>t.chemZn=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Zn",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Mn",prop:"chemMn"},{default:r(()=>[l(n,{modelValue:t.chemMn,"onUpdate:modelValue":e[26]||(e[26]=a=>t.chemMn=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Mn",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Ti",prop:"chemTi"},{default:r(()=>[l(n,{modelValue:t.chemTi,"onUpdate:modelValue":e[27]||(e[27]=a=>t.chemTi=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Ti",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"化学成分分析-Cr",prop:"chemCr"},{default:r(()=>[l(n,{modelValue:t.chemCr,"onUpdate:modelValue":e[28]||(e[28]=a=>t.chemCr=a),modelModifiers:{number:!0},placeholder:"请输入化学成分分析-Cr",type:"number"},null,8,["modelValue"])]),_:1}),l(s,{label:"原材料出厂检测日期",prop:"leavefactoryDate"},{default:r(()=>[l(ne,{modelValue:t.leavefactoryDate,"onUpdate:modelValue":e[29]||(e[29]=a=>t.leavefactoryDate=a),type:"date",placeholder:"请选择原材料出厂检测日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(s,{label:"原材料入厂检测日期",prop:"detectionTime"},{default:r(()=>[l(ne,{modelValue:t.detectionTime,"onUpdate:modelValue":e[30]||(e[30]=a=>t.detectionTime=a),type:"date",placeholder:"请选择原材料入厂检测日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(s,{label:"质量证明书",prop:"certificate"},{default:r(()=>[l(Le,{ref_key:"certificateUpload",ref:L,"auto-upload":!1,"on-change":Ue,limit:10,accept:".pdf,.jpg,.jpeg,.png","file-list":[],"show-file-list":!1},{default:r(()=>[l(d,{type:"primary"},{default:r(()=>e[47]||(e[47]=[g("上传文件")])),_:1})]),_:1},512),t.certificate?(h(),C("div",nl,[(h(!0),C(me,null,pe(JSON.parse(t.certificate),(a,V)=>(h(),C("div",{key:V,class:"uploaded-file"},[l(J(ce),{content:a.name,placement:"top"},{default:r(()=>[k("span",{class:"file-link",onClick:A=>re(a.url,a.name)},Ze(a.name),9,ul)]),_:2},1032,["content"]),l(d,{type:"danger",size:"mini",onClick:A=>_e(V)},{default:r(()=>e[48]||(e[48]=[g("删除")])),_:2},1032,["onClick"])]))),128))])):Je("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),l(Ke,{modelValue:v.value,"onUpdate:modelValue":e[33]||(e[33]=a=>v.value=a),onSelect:ve,woNoList:K.value,totalWoNo:I.value,loadingWoNo:B.value,onSearch:F},null,8,["modelValue","woNoList","totalWoNo","loadingWoNo"]),l(ue,{title:"选择原材料制造商",modelValue:U.value,"onUpdate:modelValue":e[37]||(e[37]=a=>U.value=a),width:"600px"},{default:r(()=>[l(n,{modelValue:y.descr,"onUpdate:modelValue":e[34]||(e[34]=a=>y.descr=a),placeholder:"请输入供应商名称查询",style:{"margin-bottom":"10px"},clearable:"",onClear:M,onKeyup:x(M,["enter"])},null,8,["modelValue"]),ie((h(),de(R,{data:P.value,border:"",style:{width:"100%"},onRowClick:he},{default:r(()=>[l(u,{prop:"no",label:"供应商编号"}),l(u,{prop:"descr",label:"供应商名称"}),l(u,{prop:"contactname",label:"联系人"}),l(u,{prop:"phone",label:"联系电话"}),l(u,{label:"操作"},{default:r(({row:a})=>[l(d,{type:"primary",size:"small",onClick:V=>X(a)},{default:r(()=>e[51]||(e[51]=[g("选择")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[se,O.value]]),k("div",sl,[l(D,{"current-page":y.pageNumber,"onUpdate:currentPage":e[35]||(e[35]=a=>y.pageNumber=a),"page-size":y.pageSize,"onUpdate:pageSize":e[36]||(e[36]=a=>y.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:H.value,onSizeChange:Ne,onCurrentChange:Ve},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])])}}},bl=De(il,[["__scopeId","data-v-9a0caee5"]]);export{bl as default};

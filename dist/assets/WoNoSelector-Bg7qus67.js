import{_ as F,v as G,g as V,r as m,s as I,h as r,G as O,o as y,l as S,w as s,a as z,b as a,e as g,i as N,H as $,q as A,E as q}from"./index-Bwbtb0V1.js";import{a as J}from"./plshengchangongdan-BS-Hu3DG.js";const Q={class:"search-bar"},X={class:"pagination-container"},Y={__name:"WoNoSelector",props:{modelValue:{type:Boolean,default:!1},dialogTitle:{type:String,default:"选择生产工单号"}},emits:["update:modelValue","select"],setup(v,{emit:H}){const W=[{id:1,value:"待处理"},{id:2,value:"处理中"},{id:3,value:"已完成"},{id:4,value:"已取消"},{id:5,value:"已过期"}],k=t=>{const e=W.find(p=>p.id===t);return e?e.value:"未知状态"},L=v,f=H;G(()=>L.modelValue,t=>{c.value=t});const o=V({contractNo:"",woNo:"",ipoNo:"",purchaserHqCode:""}),n=V({pageNumber:1,pageSize:10,contractNo:"",woNo:"",ipoNo:"",purchaserHqCode:""}),b=m([]),h=m(0),_=m(!1),c=m(!1),x=async()=>{_.value=!0;try{n.contractNo=o.contractNo,n.woNo=o.woNo,n.ipoNo=o.ipoNo,n.purchaserHqCode=o.purchaserHqCode;const t=await J(n);t.data&&t.data.page&&t.data.page.list?(b.value=t.data.page.list,h.value=t.data.page.totalRow):q.error("返回的数据格式不正确")}catch(t){q.error("获取合同号列表失败: "+t.message)}finally{_.value=!1}},d=()=>{n.pageNumber=1,WoNoList()},U=()=>{o.contractNo="",o.woNo="",o.ipoNo="",o.purchaserHqCode="",n.pageNumber=1,WoNoList()},K=t=>{n.pageSize=t,n.pageNumber=1,WoNoList()},B=t=>{n.pageNumber=t,WoNoList()},D=t=>{C(t)},C=t=>{f("select",t),c.value=!1},P=()=>{o.contractNo="",o.woNo="",o.ipoNo="",o.purchaserHqCode="",n.pageNumber=1,f("update:modelValue",!1)};return I(()=>{x()}),(t,e)=>{const p=r("el-input"),u=r("el-col"),w=r("el-button"),R=r("el-row"),i=r("el-table-column"),T=r("el-table"),E=r("el-pagination"),M=r("el-dialog"),j=O("loading");return y(),S(M,{title:v.dialogTitle,modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value=l),width:"60%",onClosed:P},{default:s(()=>[z("div",Q,[a(R,{gutter:20},{default:s(()=>[a(u,{span:8},{default:s(()=>[a(p,{modelValue:o.contractNo,"onUpdate:modelValue":e[0]||(e[0]=l=>o.contractNo=l),placeholder:"请输入合同编号",onKeyup:g(d,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{span:8},{default:s(()=>[a(p,{modelValue:o.woNo,"onUpdate:modelValue":e[1]||(e[1]=l=>o.woNo=l),placeholder:"请输入生产工单号",onKeyup:g(d,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{span:8},{default:s(()=>[a(p,{modelValue:o.ipoNo,"onUpdate:modelValue":e[2]||(e[2]=l=>o.ipoNo=l),placeholder:"请输入生产订单号",onKeyup:g(d,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{span:8},{default:s(()=>[a(p,{modelValue:o.purchaserHqCode,"onUpdate:modelValue":e[3]||(e[3]=l=>o.purchaserHqCode=l),placeholder:"请输入采购方总部编码",onKeyup:g(d,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{span:8},{default:s(()=>[a(w,{type:"primary",onClick:d},{default:s(()=>e[7]||(e[7]=[N("搜索")])),_:1}),a(w,{onClick:U},{default:s(()=>e[8]||(e[8]=[N("重置")])),_:1})]),_:1})]),_:1})]),$((y(),S(T,{data:b.value,border:"",style:{width:"100%","margin-top":"20px"},onRowClick:D},{default:s(()=>[a(i,{prop:"contractNo",label:"合同编号",width:"150"}),a(i,{prop:"woNo",label:"生产工单号",width:"120"}),a(i,{prop:"purchaserHqCode",label:"采购方总部编码",width:"150"}),a(i,{prop:"ipoNo",label:"生产订单号",width:"150"}),a(i,{prop:"woStatus",label:"工单状态",width:"120"},{default:s(({row:l})=>[N(A(k(l.woStatus)),1)]),_:1}),a(i,{label:"操作",width:"100"},{default:s(({row:l})=>[a(w,{type:"primary",size:"small",onClick:Z=>C(l)},{default:s(()=>e[9]||(e[9]=[N(" 选择 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,_.value]]),z("div",X,[a(E,{"current-page":n.pageNumber,"onUpdate:currentPage":e[4]||(e[4]=l=>n.pageNumber=l),"page-size":n.pageSize,"onUpdate:pageSize":e[5]||(e[5]=l=>n.pageSize=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:K,onCurrentChange:B},null,8,["current-page","page-size","total"])])]),_:1},8,["title","modelValue"])}}},te=F(Y,[["__scopeId","data-v-70878815"]]);export{te as W};

import{_ as oe,g as q,r as b,k as re,s as ne,h as s,G as de,o as y,c as _,a as E,b as e,e as F,w as t,F as U,m as h,i as m,H as ue,l as se,q as L,E as c,A as pe}from"./index-Bwbtb0V1.js";import{g as ie,a as me,d as ge,c as be,u as ce}from"./basorg-D9Q4sOwh.js";const fe={class:"basorg-management"},Ve={class:"action-bar"},ye={class:"pagination-container"},ve={__name:"basorg",setup(_e){const C=[{id:1,value:"供应商"},{id:2,value:"运输商"},{id:3,value:"客户"},{id:99,value:"其他"}],S=["华北地区","华东地区","华南地区","华中地区","西南地区","西北地区","东北地区","港澳台地区","海外地区"],D=d=>{const l=C.find(n=>n.id===d);return l?l.value:"未知"},r=q({no:"",descr:"",type:"",area:"",pageNumber:1,pageSize:10}),T=b([]),R=b(0),B=b(!1),f=b(!1),x=b("add"),$=re(()=>x.value==="add"?"新增客户":"编辑客户"),v=b(null),z=b("basic"),o=q({id:void 0,no:"",descr:"",bankcode:"",contactname:"",address:"",city:"",province:"",country:"",postalcode:"",phone:"",fax:"",bank:"",taxcode:"",email:"",isdelete:0,memo:"",status:0,type:3,contactheadship:"",flag:null,area:""}),j={no:[{required:!0,message:"请输入客户编号",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],descr:[{required:!0,message:"请输入客户名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],bankcode:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],contactname:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],address:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],city:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],province:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],country:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],postalcode:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],phone:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],fax:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],bank:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],taxcode:[{max:50,message:"长度不能超过50个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱格式",trigger:["blur","change"]},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],memo:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],type:[{required:!0,message:"请选择客户类型",trigger:"change"},{type:"number",message:"请选择有效的客户类型",trigger:["blur","change"]}],contactheadship:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],area:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}]},p=async()=>{B.value=!0;try{const d=await ie(r);T.value=d.data.page.list,R.value=d.data.page.totalRow}catch(d){console.error("获取客户列表失败",d),c.error("获取客户列表失败")}finally{B.value=!1}},K=d=>{r.pageSize=d,p()},M=d=>{r.pageNumber=d,p()},A=()=>{v.value&&v.value.resetFields(),Object.assign(o,{id:void 0,no:"",descr:"",bankcode:"",contactname:"",address:"",city:"",province:"",country:"",postalcode:"",phone:"",fax:"",bank:"",taxcode:"",email:"",isdelete:0,memo:"",status:0,type:3,contactheadship:"",flag:null,area:""}),z.value="basic"},I=()=>{r.no="",r.descr="",r.type="",r.area="",r.pageNumber=1,p()},P=()=>{x.value="add",f.value=!0},G=async d=>{x.value="edit";try{const l=await me({id:d.id});Object.assign(o,l.data.basOrg),f.value=!0}catch(l){console.error("获取客户详情失败",l),c.error("获取客户详情失败")}},H=d=>{pe.confirm(`确认删除客户"${d.no}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await ge({id:d.id}),c.success("删除成功"),p()}catch(l){console.error("删除客户失败",l),c.error("删除客户失败")}}).catch(()=>{})},J=()=>{v.value&&v.value.validate(async d=>{if(d)try{x.value==="add"?(await be(o),c.success("新增成功")):(await ce(o),c.success("修改成功")),f.value=!1,p()}catch(l){console.error("保存客户失败",l),c.error("保存客户失败")}})};return ne(()=>{p()}),(d,l)=>{const n=s("el-input"),k=s("el-option"),w=s("el-select"),g=s("el-button"),Q=s("Refresh"),W=s("el-icon"),i=s("el-table-column"),X=s("el-table"),Y=s("el-pagination"),u=s("el-form-item"),V=s("el-col"),O=s("el-row"),N=s("el-tab-pane"),Z=s("el-tabs"),ee=s("el-form"),le=s("el-dialog"),ae=de("loading");return y(),_("div",fe,[E("div",Ve,[e(n,{modelValue:r.no,"onUpdate:modelValue":l[0]||(l[0]=a=>r.no=a),placeholder:"请输入客户编号查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:F(p,["enter"])},null,8,["modelValue"]),e(n,{modelValue:r.descr,"onUpdate:modelValue":l[1]||(l[1]=a=>r.descr=a),placeholder:"请输入客户名称查询",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:p,onKeyup:F(p,["enter"])},null,8,["modelValue"]),e(w,{modelValue:r.type,"onUpdate:modelValue":l[2]||(l[2]=a=>r.type=a),placeholder:"选择客户类型",style:{width:"200px","margin-right":"10px"}},{default:t(()=>[(y(),_(U,null,h(C,a=>e(k,{key:a.id,label:a.value,value:a.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(w,{modelValue:r.area,"onUpdate:modelValue":l[3]||(l[3]=a=>r.area=a),placeholder:"选择所属区域",style:{width:"200px","margin-right":"10px"}},{default:t(()=>[(y(),_(U,null,h(S,a=>e(k,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(g,{type:"primary",onClick:p},{default:t(()=>l[27]||(l[27]=[m("搜索")])),_:1}),e(g,{type:"warning",onClick:I},{default:t(()=>[e(W,null,{default:t(()=>[e(Q)]),_:1}),l[28]||(l[28]=m(" 刷新 "))]),_:1}),e(g,{type:"primary",style:{"margin-left":"auto"},onClick:P},{default:t(()=>l[29]||(l[29]=[m("新增客户")])),_:1})]),ue((y(),se(X,{data:T.value,border:"",style:{width:"100%"}},{default:t(()=>[e(i,{type:"index",label:"序号",width:"80"}),e(i,{prop:"no",label:"客户编号"}),e(i,{prop:"descr",label:"客户名称"}),e(i,{prop:"contactname",label:"联系人"}),e(i,{prop:"phone",label:"联系电话",width:"120"}),e(i,{prop:"email",label:"邮箱",width:"150"}),e(i,{prop:"type",label:"客户类型",width:"100"},{default:t(({row:a})=>[m(L(D(a.type)),1)]),_:1}),e(i,{prop:"area",label:"所属区域",width:"100"}),e(i,{prop:"city",label:"城市",width:"80"}),e(i,{prop:"status",label:"状态",width:"80"},{default:t(({row:a})=>[m(L(a.status===0?"正常":"停用"),1)]),_:1}),e(i,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[e(g,{type:"primary",size:"small",onClick:te=>G(a)},{default:t(()=>l[30]||(l[30]=[m("编辑")])),_:2},1032,["onClick"]),e(g,{type:"danger",size:"small",onClick:te=>H(a)},{default:t(()=>l[31]||(l[31]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ae,B.value]]),E("div",ye,[e(Y,{"current-page":r.pageNumber,"onUpdate:currentPage":l[4]||(l[4]=a=>r.pageNumber=a),"page-size":r.pageSize,"onUpdate:pageSize":l[5]||(l[5]=a=>r.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:R.value,onSizeChange:K,onCurrentChange:M},null,8,["current-page","page-size","total"])]),e(le,{title:$.value,modelValue:f.value,"onUpdate:modelValue":l[26]||(l[26]=a=>f.value=a),width:"900px",onClosed:A},{footer:t(()=>[e(g,{onClick:l[25]||(l[25]=a=>f.value=!1)},{default:t(()=>l[32]||(l[32]=[m("取消")])),_:1}),e(g,{type:"primary",onClick:J},{default:t(()=>l[33]||(l[33]=[m("确定")])),_:1})]),default:t(()=>[e(ee,{ref_key:"formRef",ref:v,model:o,rules:j,"label-width":"100px"},{default:t(()=>[e(Z,{modelValue:z.value,"onUpdate:modelValue":l[24]||(l[24]=a=>z.value=a)},{default:t(()=>[e(N,{label:"基本信息",name:"basic"},{default:t(()=>[e(O,{gutter:20},{default:t(()=>[e(V,{span:12},{default:t(()=>[e(u,{label:"客户编号",prop:"no"},{default:t(()=>[e(n,{modelValue:o.no,"onUpdate:modelValue":l[6]||(l[6]=a=>o.no=a),placeholder:"请输入客户编号"},null,8,["modelValue"])]),_:1}),e(u,{label:"客户名称",prop:"descr"},{default:t(()=>[e(n,{modelValue:o.descr,"onUpdate:modelValue":l[7]||(l[7]=a=>o.descr=a),placeholder:"请输入客户名称"},null,8,["modelValue"])]),_:1}),e(u,{label:"类型",prop:"type"},{default:t(()=>[e(w,{modelValue:o.type,"onUpdate:modelValue":l[8]||(l[8]=a=>o.type=a),placeholder:"请选择客户类型",disabled:!0},{default:t(()=>[(y(),_(U,null,h(C,a=>e(k,{key:a.id,label:a.value,value:a.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"所属区域",prop:"area"},{default:t(()=>[e(w,{modelValue:o.area,"onUpdate:modelValue":l[9]||(l[9]=a=>o.area=a),placeholder:"请选择或输入区域","allow-create":"",filterable:""},{default:t(()=>[(y(),_(U,null,h(S,a=>e(k,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(u,{label:"联系人",prop:"contactname"},{default:t(()=>[e(n,{modelValue:o.contactname,"onUpdate:modelValue":l[10]||(l[10]=a=>o.contactname=a),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),e(u,{label:"联系人职务",prop:"contactheadship"},{default:t(()=>[e(n,{modelValue:o.contactheadship,"onUpdate:modelValue":l[11]||(l[11]=a=>o.contactheadship=a),placeholder:"请输入联系人职务"},null,8,["modelValue"])]),_:1}),e(u,{label:"联系电话",prop:"phone"},{default:t(()=>[e(n,{modelValue:o.phone,"onUpdate:modelValue":l[12]||(l[12]=a=>o.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(u,{label:"传真号码",prop:"fax"},{default:t(()=>[e(n,{modelValue:o.fax,"onUpdate:modelValue":l[13]||(l[13]=a=>o.fax=a),placeholder:"请输入传真号码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{label:"地址信息",name:"address"},{default:t(()=>[e(O,{gutter:20},{default:t(()=>[e(V,{span:12},{default:t(()=>[e(u,{label:"详细地址",prop:"address"},{default:t(()=>[e(n,{modelValue:o.address,"onUpdate:modelValue":l[14]||(l[14]=a=>o.address=a),placeholder:"请输入详细地址",type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(u,{label:"所在城市",prop:"city"},{default:t(()=>[e(n,{modelValue:o.city,"onUpdate:modelValue":l[15]||(l[15]=a=>o.city=a),placeholder:"请输入所在城市"},null,8,["modelValue"])]),_:1}),e(u,{label:"所在省份",prop:"province"},{default:t(()=>[e(n,{modelValue:o.province,"onUpdate:modelValue":l[16]||(l[16]=a=>o.province=a),placeholder:"请输入所在省份"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(u,{label:"所在国家",prop:"country"},{default:t(()=>[e(n,{modelValue:o.country,"onUpdate:modelValue":l[17]||(l[17]=a=>o.country=a),placeholder:"请输入所在国家"},null,8,["modelValue"])]),_:1}),e(u,{label:"邮政编码",prop:"postalcode"},{default:t(()=>[e(n,{modelValue:o.postalcode,"onUpdate:modelValue":l[18]||(l[18]=a=>o.postalcode=a),placeholder:"请输入邮政编码"},null,8,["modelValue"])]),_:1}),e(u,{label:"电子邮箱",prop:"email"},{default:t(()=>[e(n,{modelValue:o.email,"onUpdate:modelValue":l[19]||(l[19]=a=>o.email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{label:"财务信息",name:"finance"},{default:t(()=>[e(O,{gutter:20},{default:t(()=>[e(V,{span:12},{default:t(()=>[e(u,{label:"开户银行",prop:"bank"},{default:t(()=>[e(n,{modelValue:o.bank,"onUpdate:modelValue":l[20]||(l[20]=a=>o.bank=a),placeholder:"请输入开户银行"},null,8,["modelValue"])]),_:1}),e(u,{label:"银行账号",prop:"bankcode"},{default:t(()=>[e(n,{modelValue:o.bankcode,"onUpdate:modelValue":l[21]||(l[21]=a=>o.bankcode=a),placeholder:"请输入银行账号"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(u,{label:"税号",prop:"taxcode"},{default:t(()=>[e(n,{modelValue:o.taxcode,"onUpdate:modelValue":l[22]||(l[22]=a=>o.taxcode=a),placeholder:"请输入税号"},null,8,["modelValue"])]),_:1}),e(u,{label:"备注信息",prop:"memo"},{default:t(()=>[e(n,{modelValue:o.memo,"onUpdate:modelValue":l[23]||(l[23]=a=>o.memo=a),placeholder:"请输入备注信息",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},we=oe(ve,[["__scopeId","data-v-139de0b6"]]);export{we as default};

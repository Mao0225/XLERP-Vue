import{_ as w,d as v,c as V,a,b as s,w as r,e as y,u as F,f as h,r as R,g as k,t as C,h as i,o as L,i as g,E as c}from"./index-Bwbtb0V1.js";const M="/erp/assets/sipinglogo-CJlR5gfp.jpg",U=v({name:"Login",setup(){const e=F(),o=h(),u=R(null),n=k({loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},loading:!1,rememberMe:!1}),m=()=>{u.value.validate(async p=>{if(p){n.loading=!0;try{await o.login({username:n.loginForm.username,password:n.loginForm.password}),c.success("登录成功");const l=e.currentRoute.value.query.redirect||"/dashboard";await e.push(l)}catch(l){console.error("登录失败:",l),c.error(l.message||"登录失败，请检查用户名和密码")}finally{n.loading=!1}}})};return{loginFormRef:u,...C(n),handleLogin:m}}}),$={class:"login-container"},q={class:"login-card"},B={class:"login-form"},E={class:"login-options"};function K(e,o,u,n,m,p){const l=i("el-input"),d=i("el-form-item"),f=i("el-checkbox"),_=i("el-button"),b=i("el-form");return L(),V("div",$,[a("div",q,[o[5]||(o[5]=a("div",{class:"login-header"},[a("div",{class:"logo-container"},[a("img",{src:M,alt:"系统Logo",class:"system-logo"})])],-1)),a("div",B,[s(b,{ref:"loginFormRef",model:e.loginForm,rules:e.loginRules,onKeyup:y(e.handleLogin,["enter"])},{default:r(()=>[s(d,{prop:"username"},{default:r(()=>[s(l,{modelValue:e.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=t=>e.loginForm.username=t),placeholder:"用户名","prefix-icon":"user",clearable:"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:r(()=>[s(l,{modelValue:e.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=t=>e.loginForm.password=t),placeholder:"密码","prefix-icon":"lock","show-password":"",clearable:"",type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,null,{default:r(()=>[a("div",E,[s(f,{modelValue:e.rememberMe,"onUpdate:modelValue":o[2]||(o[2]=t=>e.rememberMe=t)},{default:r(()=>o[3]||(o[3]=[g("记住我")])),_:1},8,["modelValue"])])]),_:1}),s(d,null,{default:r(()=>[s(_,{type:"primary",class:"login-button",loading:e.loading,onClick:e.handleLogin},{default:r(()=>o[4]||(o[4]=[g(" 登录 ")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules","onKeyup"])])])])}const S=w(U,[["render",K],["__scopeId","data-v-bdd52515"]]);export{S as default};
